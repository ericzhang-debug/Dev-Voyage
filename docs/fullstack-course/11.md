---
title: ç¬¬ 11 ç« ï¼šæ’ä»¶åŒ–è¯„è®ºç³»ç»Ÿ
createTime: 2025/12/19 12:00:00
permalink: /fullstack-course/comments/
---
# ç¬¬ 11 ç« ï¼šæ’ä»¶åŒ–è¯„è®ºç³»ç»Ÿ

::: important æœ¬ç« å­¦ä¹ ç›®æ ‡
- ç†è§£æ’ä»¶åŒ–æ¶æ„æ€ç»´
- å­¦ä¹  Feature Flag æ¨¡å¼
- å®ç°å¯å¼€å…³çš„è¯„è®ºåŠŸèƒ½
- æŒæ¡åŠŸèƒ½æ¨¡å—åŒ–è®¾è®¡
- ğŸ‰ **æˆæœï¼šä¸€ä¸ªå¯å¼€å…³çš„è¯„è®ºç³»ç»Ÿï¼**
:::

åšå®¢å…‰èƒ½çœ‹ä¸èƒ½äº’åŠ¨ï¼Ÿè¯»è€…æƒ³å‘è¡¨çœ‹æ³•æ€ä¹ˆåŠï¼Ÿè¿™ä¸€ç« æˆ‘ä»¬æ¥å®ç°è¯„è®ºåŠŸèƒ½ï¼

ä½†æˆ‘ä»¬ä¸ä»…ä»…æ˜¯"å®ç°è¯„è®º"ï¼Œæ›´é‡è¦çš„æ˜¯å­¦ä¹ **æ’ä»¶åŒ–æ€ç»´**â€”â€”åŠŸèƒ½åº”è¯¥åƒæ’ä»¶ä¸€æ ·å¯ä»¥è‡ªç”±å¼€å…³ã€çµæ´»é…ç½®ã€‚

::: tip æœ¬ç« ç»“æŸåä½ ä¼šå¾—åˆ°ä»€ä¹ˆ
ä¸€ä¸ªæ’ä»¶åŒ–çš„è¯„è®ºç³»ç»Ÿâ€”â€”å¯ä»¥å…¨å±€å¼€å…³ï¼Œä¹Ÿå¯ä»¥å•ç¯‡æ–‡ç« å…³é—­è¯„è®ºï¼Œä¸ºæœªæ¥æ‰©å±•ï¼ˆç‚¹èµã€æ”¶è—ï¼‰æ‰“ä¸‹åŸºç¡€ï¼
:::


## 11.1 æ’ä»¶åŒ–æ€ç»´å…¥é—¨

### 11.1.1 ä»€ä¹ˆæ˜¯æ’ä»¶åŒ–ï¼Ÿ

::: info å†å²è¶£äº‹ï¼šWordPress æ’ä»¶ç”Ÿæ€
WordPress æ˜¯ä¸–ç•Œä¸Šæœ€æˆåŠŸçš„å†…å®¹ç®¡ç†ç³»ç»Ÿï¼Œä½ çŸ¥é“å®ƒæˆåŠŸçš„ç§˜è¯€å—ï¼Ÿ

**æ’ä»¶ç³»ç»Ÿã€‚**

WordPress è‡ªå·±åªæä¾›æ ¸å¿ƒåŠŸèƒ½ï¼ˆå‘æ–‡ç« ã€ç®¡ç†ç”¨æˆ·ï¼‰ï¼Œå…¶ä»–ä¸€åˆ‡éƒ½å¯ä»¥é€šè¿‡æ’ä»¶å®ç°ã€‚æƒ³è¦ç”µå•†åŠŸèƒ½ï¼Ÿè£… WooCommerce æ’ä»¶ã€‚æƒ³è¦ SEO ä¼˜åŒ–ï¼Ÿè£… Yoast SEO æ’ä»¶ã€‚

æˆªè‡³ 2024 å¹´ï¼ŒWordPress æ’ä»¶å¸‚åœºæœ‰è¶…è¿‡ **60,000 ä¸ªæ’ä»¶**ï¼Œè¿™è®© WordPress å¯ä»¥æ»¡è¶³å‡ ä¹ä»»ä½•éœ€æ±‚ã€‚

è¿™ç§"æ ¸å¿ƒ+æ’ä»¶"çš„æ¶æ„æ€æƒ³ï¼Œå½±å“äº†æ— æ•°è½¯ä»¶çš„è®¾è®¡ï¼ŒåŒ…æ‹¬ VS Codeï¼ˆä½ ç°åœ¨ç”¨çš„ç¼–è¾‘å™¨ï¼ï¼‰ã€Chrome æµè§ˆå™¨ç­‰ã€‚
:::

**æ’ä»¶åŒ–çš„æ ¸å¿ƒæ€æƒ³**ï¼š
- åŠŸèƒ½æ¨¡å—åŒ–ï¼Œå„è‡ªç‹¬ç«‹
- å¯ä»¥éšæ—¶å¼€å¯/å…³é—­
- ä¸å½±å“æ ¸å¿ƒç³»ç»Ÿè¿è¡Œ
- æ˜“äºæ‰©å±•å’Œç»´æŠ¤

### 11.1.2 ä¸ºä»€ä¹ˆéœ€è¦åŠŸèƒ½å¼€å…³ï¼Ÿ

æƒ³è±¡è¿™äº›åœºæ™¯ï¼š
- æ–°åŠŸèƒ½è¿˜åœ¨æµ‹è¯•ä¸­ï¼Œåªæƒ³è®© 10% çš„ç”¨æˆ·å…ˆç”¨
- æŸç¯‡æ–‡ç« è®¨è®ºå¤ªæ¿€çƒˆï¼Œæƒ³ä¸´æ—¶å…³é—­è¯„è®º
- æœåŠ¡å™¨å‹åŠ›å¤§ï¼Œæš‚æ—¶å…³é—­éæ ¸å¿ƒåŠŸèƒ½
- A/B æµ‹è¯•ï¼Œå¯¹æ¯”æœ‰è¯„è®ºå’Œæ— è¯„è®ºçš„ç”¨æˆ·è¡Œä¸º

è¿™äº›éƒ½éœ€è¦**åŠŸèƒ½å¼€å…³ï¼ˆFeature Flagï¼‰**ï¼

### 11.1.3 Feature Flag æ¨¡å¼

::: info å†å²è¶£äº‹ï¼šFacebook çš„ç°åº¦å‘å¸ƒ
Feature Flag çš„æ¦‚å¿µåœ¨ 2000 å¹´ä»£å°±å­˜åœ¨äº†ï¼Œä½†çœŸæ­£è®©å®ƒæµè¡Œèµ·æ¥çš„æ˜¯ Facebookã€‚

Facebook æ¯å¤©è¦å‘å¸ƒå¤šæ¬¡ä»£ç æ›´æ–°ï¼Œé¢å‘ 20 äº¿ç”¨æˆ·ã€‚å¦‚æœæ–°åŠŸèƒ½æœ‰ bugï¼Œå½±å“èŒƒå›´æ˜¯ç¾éš¾æ€§çš„ã€‚

ä»–ä»¬çš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼š**æŠŠæ–°åŠŸèƒ½åŒ…åœ¨ Feature Flag é‡Œ**ã€‚

```
if (feature_enabled("new_comment_system")) {
    // ä½¿ç”¨æ–°è¯„è®ºç³»ç»Ÿ
} else {
    // ä½¿ç”¨æ—§è¯„è®ºç³»ç»Ÿ
}
```

æ–°åŠŸèƒ½å…ˆåªå¯¹ 1% çš„ç”¨æˆ·å¼€æ”¾ï¼Œæ²¡é—®é¢˜å°±é€æ¸æ‰©å¤§åˆ° 10%ã€50%ã€100%ã€‚æœ‰é—®é¢˜ï¼Ÿä¸€è¡Œé…ç½®å°±èƒ½å›æ»šã€‚

è¿™ç§åšæ³•åæ¥æˆä¸ºäº’è”ç½‘å…¬å¸çš„æ ‡å‡†å®è·µï¼Œå‚¬ç”Ÿäº† LaunchDarklyã€Flagsmith ç­‰ä¸“é—¨çš„ Feature Flag æœåŠ¡ã€‚
:::

### 11.1.4 æˆ‘ä»¬çš„æ’ä»¶åŒ–è®¾è®¡

```mermaid
graph TD
    subgraph "åšå®¢åŠŸèƒ½æ’ä»¶ä½“ç³»"
        A["é…ç½®ä¸­å¿ƒ"]
        
        subgraph "åŠŸèƒ½æ’ä»¶"
            B["è¯„è®ºæ’ä»¶ âœ“ å¯å¼€å…³ (æœ¬ç« å®ç°)"]
            C["ç‚¹èµæ’ä»¶ âœ“ å¯å¼€å…³ (ç»ƒä¹ æ‰©å±•)"]
            D["æ”¶è—æ’ä»¶ âœ“ å¯å¼€å…³ (ç»ƒä¹ )"]
        end
        
        A --> B
        A --> C
        A --> D
    end
    
    subgraph "é…ç½®è¯¦æƒ…"
        E["FEATURES = {\n  'comment': True,   # è¯„è®ºåŠŸèƒ½\n  'like': False,    # ç‚¹èµåŠŸèƒ½ï¼ˆå¾…å®ç°ï¼‰\n}"]
    end
    
    A -.-> E

```

## 11.2 åŠŸèƒ½é…ç½®ä¸­å¿ƒ

### 11.2.1 åç«¯ï¼šåˆ›å»ºé…ç½®æ–‡ä»¶

åˆ›å»º `backend/src/backend/config.py`ï¼š

```python
# backend/src/backend/config.py
"""
åŠŸèƒ½é…ç½®ä¸­å¿ƒ
æ‰€æœ‰å¯å¼€å…³çš„åŠŸèƒ½éƒ½åœ¨è¿™é‡Œç»Ÿä¸€ç®¡ç†
"""

# åŠŸèƒ½å¼€å…³
FEATURES = {
    "comment": True,      # è¯„è®ºåŠŸèƒ½ï¼ˆæœ¬ç« å®ç°ï¼‰
    "like": False,        # ç‚¹èµåŠŸèƒ½ï¼ˆç»ƒä¹ é¢˜ï¼‰
    "favorite": False,    # æ”¶è—åŠŸèƒ½ï¼ˆç»ƒä¹ é¢˜ï¼‰
}


def is_feature_enabled(feature_name: str) -> bool:
    """æ£€æŸ¥æŸä¸ªåŠŸèƒ½æ˜¯å¦å¼€å¯"""
    return FEATURES.get(feature_name, False)


def get_all_features() -> dict:
    """è·å–æ‰€æœ‰åŠŸèƒ½çš„çŠ¶æ€"""
    return FEATURES.copy()
```

::: tip ä¸ºä»€ä¹ˆç”¨å•ç‹¬çš„é…ç½®æ–‡ä»¶ï¼Ÿ
æŠŠé…ç½®é›†ä¸­ç®¡ç†æœ‰å¾ˆå¤šå¥½å¤„ï¼š
- ä¸€ç›®äº†ç„¶ï¼šæ‰€æœ‰åŠŸèƒ½å¼€å…³åœ¨ä¸€ä¸ªåœ°æ–¹
- æ˜“äºä¿®æ”¹ï¼šæ”¹ä¸€è¡Œä»£ç å°±èƒ½å¼€å…³åŠŸèƒ½
- æ–¹ä¾¿æ‰©å±•ï¼šæœªæ¥å¯ä»¥æ”¹æˆä»æ•°æ®åº“æˆ–è¿œç¨‹æœåŠ¡è¯»å–
:::

### 11.2.2 æ·»åŠ åŠŸèƒ½çŠ¶æ€ API

åœ¨ `backend/src/backend/__init__.py` ä¸­æ·»åŠ ï¼š

```python
from .config import get_all_features, is_feature_enabled

@app.get("/api/features")
def get_features():
    """è·å–æ‰€æœ‰åŠŸèƒ½çš„å¼€å…³çŠ¶æ€"""
    return get_all_features()


@app.get("/api/features/{feature_name}")
def get_feature_status(feature_name: str):
    """è·å–å•ä¸ªåŠŸèƒ½çš„çŠ¶æ€"""
    return {
        "feature": feature_name,
        "enabled": is_feature_enabled(feature_name)
    }
```

### 11.2.3 å‰ç«¯ï¼šåŠŸèƒ½å¼€å…³ Hook

åˆ›å»º `frontend/app/composables/useFeature.ts`ï¼š

```typescript
// frontend/app/composables/useFeature.ts

// åŠŸèƒ½çŠ¶æ€ç¼“å­˜
const featuresCache = ref<Record<string, boolean> | null>(null)
const featuresLoading = ref(false)

export const useFeature = () => {
  // åŠ è½½åŠŸèƒ½é…ç½®
  const loadFeatures = async () => {
    if (featuresCache.value || featuresLoading.value) return
    
    featuresLoading.value = true
    try {
      const data = await $fetch<Record<string, boolean>>(
        'http://localhost:8000/api/features'
      )
      featuresCache.value = data
    } catch (error) {
      console.error('åŠ è½½åŠŸèƒ½é…ç½®å¤±è´¥:', error)
      // å¤±è´¥æ—¶ä½¿ç”¨é»˜è®¤å€¼
      featuresCache.value = {
        comment: true,
        like: false,
        favorite: false
      }
    } finally {
      featuresLoading.value = false
    }
  }
  
  // æ£€æŸ¥åŠŸèƒ½æ˜¯å¦å¼€å¯
  const isEnabled = (featureName: string): boolean => {
    return featuresCache.value?.[featureName] ?? false
  }
  
  // å¸¸ç”¨åŠŸèƒ½çš„å¿«æ·æ£€æŸ¥
  const commentEnabled = computed(() => isEnabled('comment'))
  const likeEnabled = computed(() => isEnabled('like'))
  const favoriteEnabled = computed(() => isEnabled('favorite'))
  
  return {
    loadFeatures,
    isEnabled,
    commentEnabled,
    likeEnabled,
    favoriteEnabled,
    isLoading: featuresLoading
  }
}
```

### 11.2.4 åœ¨ App å¯åŠ¨æ—¶åŠ è½½é…ç½®

ä¿®æ”¹ `frontend/app/app.vue`ï¼ˆå¦‚æœæ²¡æœ‰å°±åˆ›å»ºï¼‰ï¼š

```vue
<!-- frontend/app/app.vue -->
<template>
  <NuxtLayout>
    <NuxtPage />
  </NuxtLayout>
</template>

<script setup>
const { loadFeatures } = useFeature()
const { initAuth } = useAuth()

// åº”ç”¨å¯åŠ¨æ—¶åŠ è½½é…ç½®
onMounted(() => {
  loadFeatures()
  initAuth()
})
</script>
```

---

## 11.3 è¯„è®ºåŠŸèƒ½ï¼šåç«¯å®ç°

### 11.3.1 è¯„è®ºæ•°æ®è¡¨è®¾è®¡

::: info å†å²è¶£äº‹ï¼šä» BBS åˆ°ç¤¾äº¤åª’ä½“
è¯„è®ºç³»ç»Ÿçš„æ¼”å˜æ˜¯äº’è”ç½‘ç¤¾äº¤å²çš„ç¼©å½±ã€‚

1990 å¹´ä»£çš„ BBSï¼ˆç”µå­å…¬å‘Šç‰Œï¼‰æ˜¯æœ€æ—©çš„åœ¨çº¿è®¨è®ºå½¢å¼â€”â€”ç”¨æˆ·å‘å¸–ï¼Œå…¶ä»–äººè·Ÿå¸–å›å¤ï¼Œå½¢æˆ"æ¥¼å±‚"ã€‚

2000 å¹´ä»£ï¼Œåšå®¢å…´èµ·ï¼Œè¯„è®ºå˜æˆäº†æ–‡ç« åº•éƒ¨çš„äº’åŠ¨åŒºã€‚Bloggerã€WordPress ç­‰å¹³å°è®©è¯„è®ºæˆä¸ºæ ‡é…ã€‚

2010 å¹´ä»£ï¼Œç¤¾äº¤åª’ä½“ï¼ˆå¾®åšã€Twitterã€å¾®ä¿¡ï¼‰è®©è¯„è®ºæ›´åŠ å®æ—¶åŒ–ã€ç¢ç‰‡åŒ–ã€‚ç‚¹èµã€è½¬å‘æˆä¸ºæ–°çš„äº’åŠ¨æ–¹å¼ã€‚

æˆ‘ä»¬çš„è¯„è®ºç³»ç»Ÿè™½ç„¶ç®€å•ï¼Œä½†æ‰¿è½½äº†è¿™ 30 å¹´äº’è”ç½‘å‘å±•çš„åŸºæœ¬å½¢æ€ï¼
:::

è¯„è®ºéœ€è¦å“ªäº›ä¿¡æ¯ï¼Ÿ

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `id` | INTEGER | ä¸»é”® |
| `content` | TEXT | è¯„è®ºå†…å®¹ |
| `article_id` | INTEGER | æ‰€å±æ–‡ç« ï¼ˆå¤–é”®ï¼‰ |
| `user_id` | INTEGER | è¯„è®ºè€…ï¼ˆå¤–é”®ï¼‰ |
| `created_at` | STRING | è¯„è®ºæ—¶é—´ |

### 11.3.2 åˆ›å»º Comment æ¨¡å‹

ä¿®æ”¹ `backend/src/backend/models.py`ï¼š

```python
# åœ¨ models.py ä¸­æ·»åŠ  Comment æ¨¡å‹

class Comment(Base):
    """è¯„è®ºæ¨¡å‹"""
    __tablename__ = "comments"

    id = Column(Integer, primary_key=True, index=True)
    content = Column(Text, nullable=False)
    created_at = Column(String(20))
    
    # å¤–é”®å…³è”
    article_id = Column(Integer, ForeignKey("articles.id"), nullable=False)
    user_id = Column(Integer, ForeignKey("users.id"), nullable=False)
    
    # å…³ç³»
    article = relationship("Article", back_populates="comments")
    user = relationship("User", back_populates="comments")

    def to_dict(self):
        return {
            "id": self.id,
            "content": self.content,
            "created_at": self.created_at,
            "article_id": self.article_id,
            "user": {
                "id": self.user.id,
                "username": self.user.username,
                "avatar": self.user.avatar
            } if self.user else None
        }
```

åŒæ—¶ï¼Œæ›´æ–° User å’Œ Article æ¨¡å‹ï¼Œæ·»åŠ  comments å…³ç³»ï¼š

```python
# åœ¨ User ç±»ä¸­æ·»åŠ 
comments = relationship("Comment", back_populates="user")

# åœ¨ Article ç±»ä¸­æ·»åŠ 
comments = relationship("Comment", back_populates="article", cascade="all, delete-orphan")
allow_comment = Column(Integer, default=1)  # æ˜¯å¦å…è®¸è¯„è®ºï¼š1=å…è®¸ï¼Œ0=ç¦æ­¢
```

::: note cascade="all, delete-orphan" æ˜¯ä»€ä¹ˆï¼Ÿ
è¿™ä¸ªè®¾ç½®æ„å‘³ç€ï¼šå½“æ–‡ç« è¢«åˆ é™¤æ—¶ï¼Œå®ƒçš„æ‰€æœ‰è¯„è®ºä¹Ÿä¼šè¢«è‡ªåŠ¨åˆ é™¤ã€‚

è¿™æ˜¯æ•°æ®åº“çº§è”åˆ é™¤çš„ä¸€ç§å®ç°ï¼Œç¡®ä¿ä¸ä¼šç•™ä¸‹"å­¤å„¿"æ•°æ®ã€‚
:::

### 11.3.3 æ·»åŠ è¯„è®º Schema

ä¿®æ”¹ `backend/src/backend/schemas.py`ï¼š

```python
# åœ¨ schemas.py ä¸­æ·»åŠ 

class CommentCreate(BaseModel):
    """åˆ›å»ºè¯„è®º"""
    content: str = Field(..., min_length=1, max_length=1000, description="è¯„è®ºå†…å®¹")


class CommentResponse(BaseModel):
    """è¯„è®ºå“åº”"""
    id: int
    content: str
    created_at: str
    article_id: int
    user: dict
```

### 11.3.4 å®ç°è¯„è®º API

åœ¨ `backend/src/backend/__init__.py` ä¸­æ·»åŠ ï¼š

```python
from .models import Comment
from .schemas import CommentCreate
from .config import is_feature_enabled
from .auth import get_current_user_required

# åŠŸèƒ½å¼€å…³æ£€æŸ¥è£…é¥°å™¨
def require_feature(feature_name: str):
    """è¦æ±‚æŸä¸ªåŠŸèƒ½å¿…é¡»å¼€å¯"""
    def checker():
        if not is_feature_enabled(feature_name):
            raise HTTPException(
                status_code=403,
                detail=f"åŠŸèƒ½ {feature_name} å½“å‰æœªå¼€å¯"
            )
    return checker


@app.get("/api/articles/{article_id}/comments")
def get_article_comments(
    article_id: int,
    db: Session = Depends(get_db)
):
    """è·å–æ–‡ç« çš„è¯„è®ºåˆ—è¡¨"""
    # æ£€æŸ¥åŠŸèƒ½æ˜¯å¦å¼€å¯
    if not is_feature_enabled("comment"):
        return {"comments": [], "total": 0, "enabled": False}
    
    # æ£€æŸ¥æ–‡ç« æ˜¯å¦å­˜åœ¨
    article = db.query(Article).filter(Article.id == article_id).first()
    if not article:
        raise HTTPException(status_code=404, detail="æ–‡ç« ä¸å­˜åœ¨")
    
    # æ£€æŸ¥æ–‡ç« æ˜¯å¦å…è®¸è¯„è®º
    if not article.allow_comment:
        return {
            "comments": [],
            "total": 0,
            "enabled": True,
            "article_allow_comment": False
        }
    
    # è·å–è¯„è®º
    comments = db.query(Comment).filter(
        Comment.article_id == article_id
    ).order_by(Comment.id.desc()).all()
    
    return {
        "comments": [comment.to_dict() for comment in comments],
        "total": len(comments),
        "enabled": True,
        "article_allow_comment": True
    }


@app.post("/api/articles/{article_id}/comments")
def create_comment(
    article_id: int,
    comment_data: CommentCreate,
    db: Session = Depends(get_db),
    current_user: User = Depends(get_current_user_required)  # å¿…é¡»ç™»å½•
):
    """å‘è¡¨è¯„è®º"""
    # æ£€æŸ¥åŠŸèƒ½æ˜¯å¦å¼€å¯
    if not is_feature_enabled("comment"):
        raise HTTPException(status_code=403, detail="è¯„è®ºåŠŸèƒ½å½“å‰æœªå¼€å¯")
    
    # æ£€æŸ¥æ–‡ç« æ˜¯å¦å­˜åœ¨
    article = db.query(Article).filter(Article.id == article_id).first()
    if not article:
        raise HTTPException(status_code=404, detail="æ–‡ç« ä¸å­˜åœ¨")
    
    # æ£€æŸ¥æ–‡ç« æ˜¯å¦å…è®¸è¯„è®º
    if not article.allow_comment:
        raise HTTPException(status_code=403, detail="è¯¥æ–‡ç« å·²å…³é—­è¯„è®º")
    
    # åˆ›å»ºè¯„è®º
    comment = Comment(
        content=comment_data.content,
        article_id=article_id,
        user_id=current_user.id,
        created_at=datetime.now().strftime("%Y-%m-%d %H:%M")
    )
    
    db.add(comment)
    db.commit()
    db.refresh(comment)
    
    return {
        "message": "è¯„è®ºæˆåŠŸ",
        "comment": comment.to_dict()
    }


@app.delete("/api/comments/{comment_id}")
def delete_comment(
    comment_id: int,
    db: Session = Depends(get_db),
    current_user: User = Depends(get_current_user_required)
):
    """åˆ é™¤è¯„è®ºï¼ˆåªèƒ½åˆ é™¤è‡ªå·±çš„ï¼‰"""
    comment = db.query(Comment).filter(Comment.id == comment_id).first()
    if not comment:
        raise HTTPException(status_code=404, detail="è¯„è®ºä¸å­˜åœ¨")
    
    # æ£€æŸ¥æƒé™ï¼šåªèƒ½åˆ é™¤è‡ªå·±çš„è¯„è®º
    if comment.user_id != current_user.id:
        raise HTTPException(status_code=403, detail="ä½ åªèƒ½åˆ é™¤è‡ªå·±çš„è¯„è®º")
    
    db.delete(comment)
    db.commit()
    
    return {"message": "åˆ é™¤æˆåŠŸ"}
```

::: warning XSS æ”»å‡»é˜²èŒƒ
è¯„è®ºå†…å®¹æ˜¯ç”¨æˆ·è¾“å…¥çš„ï¼Œå¯èƒ½åŒ…å«æ¶æ„è„šæœ¬ï¼

ä¾‹å¦‚ç”¨æˆ·è¯„è®ºï¼š`<script>alert('XSS')</script>`

å¦‚æœæˆ‘ä»¬ç›´æ¥æŠŠè¿™æ®µå†…å®¹æ¸²æŸ“åˆ°é¡µé¢ä¸Šï¼Œè„šæœ¬å°±ä¼šæ‰§è¡Œï¼

**é˜²èŒƒæ–¹æ³•**ï¼š
1. åç«¯ï¼šå­˜å‚¨å‰è¿‡æ»¤/è½¬ä¹‰ HTML æ ‡ç­¾
2. å‰ç«¯ï¼šæ¸²æŸ“æ—¶ä½¿ç”¨ `v-text` è€Œä¸æ˜¯ `v-html`

Vue é»˜è®¤ä¼šå¯¹ `{{ content }}` è¿›è¡Œ HTML è½¬ä¹‰ï¼Œæ‰€ä»¥åªè¦ä¸ç”¨ `v-html`ï¼Œå°±æ˜¯å®‰å…¨çš„ã€‚
:::

## 11.4 è¯„è®ºåŠŸèƒ½ï¼šå‰ç«¯ç»„ä»¶

### 11.4.1 è¯„è®ºåŒºå®¹å™¨ç»„ä»¶

åˆ›å»º `frontend/app/components/comment/CommentSection.vue`ï¼š

```vue
<!-- frontend/app/components/comment/CommentSection.vue -->
<template>
  <div class="comment-section">
    <h3 class="section-title">
      ğŸ’¬ è¯„è®º 
      <span v-if="total > 0" class="comment-count">({{ total }})</span>
    </h3>
    
    <!-- åŠŸèƒ½å…³é—­æç¤º -->
    <div v-if="!featureEnabled" class="feature-disabled">
      <p>ğŸ˜´ è¯„è®ºåŠŸèƒ½å½“å‰æœªå¼€å¯</p>
    </div>
    
    <!-- æ–‡ç« å…³é—­è¯„è®ºæç¤º -->
    <div v-else-if="!articleAllowComment" class="feature-disabled">
      <p>ğŸ”’ ä½œè€…å·²å…³é—­è¯¥æ–‡ç« çš„è¯„è®º</p>
    </div>
    
    <!-- æ­£å¸¸æ˜¾ç¤ºè¯„è®ºåŒº -->
    <template v-else>
      <!-- è¯„è®ºè¾“å…¥æ¡† -->
      <CommentForm 
        :article-id="articleId"
        @comment-added="handleCommentAdded"
      />
      
      <!-- è¯„è®ºåˆ—è¡¨ -->
      <CommentList
        :comments="comments"
        :loading="loading"
        @comment-deleted="handleCommentDeleted"
      />
    </template>
  </div>
</template>

<script setup>
const props = defineProps({
  articleId: {
    type: Number,
    required: true
  }
})

const { commentEnabled } = useFeature()

// è·å–è¯„è®ºæ•°æ®
const { data, pending: loading, refresh } = await useFetch(
  `http://localhost:8000/api/articles/${props.articleId}/comments`
)

// è§£ææ•°æ®
const comments = computed(() => data.value?.comments || [])
const total = computed(() => data.value?.total || 0)
const featureEnabled = computed(() => data.value?.enabled !== false)
const articleAllowComment = computed(() => data.value?.article_allow_comment !== false)

// è¯„è®ºæ·»åŠ ååˆ·æ–°åˆ—è¡¨
function handleCommentAdded() {
  refresh()
}

// è¯„è®ºåˆ é™¤ååˆ·æ–°åˆ—è¡¨
function handleCommentDeleted() {
  refresh()
}
</script>

<style scoped>
.comment-section {
  margin-top: 3rem;
  padding-top: 2rem;
  border-top: 1px solid #e5e7eb;
}

.section-title {
  font-size: 1.25rem;
  margin-bottom: 1.5rem;
}

.comment-count {
  color: #6b7280;
  font-weight: normal;
}

.feature-disabled {
  text-align: center;
  padding: 2rem;
  background: #f9fafb;
  border-radius: 0.5rem;
  color: #6b7280;
}
</style>
```

### 11.4.2 è¯„è®ºè¾“å…¥æ¡†ç»„ä»¶

åˆ›å»º `frontend/app/components/comment/CommentForm.vue`ï¼š

```vue
<!-- frontend/app/components/comment/CommentForm.vue -->
<template>
  <div class="comment-form">
    <!-- å·²ç™»å½•ï¼šæ˜¾ç¤ºè¾“å…¥æ¡† -->
    <div v-if="isLoggedIn" class="form-wrapper">
      <div class="user-avatar">
        {{ user?.username?.charAt(0).toUpperCase() }}
      </div>
      <div class="input-wrapper">
        <textarea
          v-model="content"
          placeholder="å†™ä¸‹ä½ çš„è¯„è®º..."
          rows="3"
          :disabled="isSubmitting"
        ></textarea>
        <div class="form-actions">
          <span class="char-count" :class="{ warning: content.length > 900 }">
            {{ content.length }}/1000
          </span>
          <button 
            @click="submitComment" 
            :disabled="!content.trim() || isSubmitting"
            class="btn-submit"
          >
            {{ isSubmitting ? 'å‘é€ä¸­...' : 'å‘è¡¨è¯„è®º' }}
          </button>
        </div>
      </div>
    </div>
    
    <!-- æœªç™»å½•ï¼šæç¤ºç™»å½• -->
    <div v-else class="login-prompt">
      <p>ğŸ’¡ ç™»å½•åå³å¯å‘è¡¨è¯„è®º</p>
      <NuxtLink to="/auth/login" class="btn-login">å»ç™»å½•</NuxtLink>
    </div>
  </div>
</template>

<script setup>
const props = defineProps({
  articleId: {
    type: Number,
    required: true
  }
})

const emit = defineEmits(['comment-added'])

const { user, token, isLoggedIn } = useAuth()

const content = ref('')
const isSubmitting = ref(false)

async function submitComment() {
  if (!content.value.trim()) return
  
  isSubmitting.value = true
  
  try {
    await $fetch(`http://localhost:8000/api/articles/${props.articleId}/comments`, {
      method: 'POST',
      headers: {
        Authorization: `Bearer ${token.value}`
      },
      body: {
        content: content.value.trim()
      }
    })
    
    content.value = ''
    emit('comment-added')
  } catch (error) {
    alert('è¯„è®ºå¤±è´¥ï¼š' + (error.data?.detail || 'æœªçŸ¥é”™è¯¯'))
  } finally {
    isSubmitting.value = false
  }
}
</script>

<style scoped>
.comment-form {
  margin-bottom: 2rem;
}

.form-wrapper {
  display: flex;
  gap: 1rem;
}

.user-avatar {
  width: 40px;
  height: 40px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  flex-shrink: 0;
}

.input-wrapper {
  flex: 1;
}

.input-wrapper textarea {
  width: 100%;
  padding: 0.75rem;
  border: 2px solid #e5e7eb;
  border-radius: 0.5rem;
  resize: vertical;
  font-size: 0.95rem;
  line-height: 1.5;
  transition: border-color 0.2s;
}

.input-wrapper textarea:focus {
  outline: none;
  border-color: #667eea;
}

.form-actions {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 0.5rem;
}

.char-count {
  font-size: 0.875rem;
  color: #9ca3af;
}

.char-count.warning {
  color: #f59e0b;
}

.btn-submit {
  padding: 0.5rem 1rem;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border: none;
  border-radius: 0.375rem;
  cursor: pointer;
  font-weight: 500;
  transition: opacity 0.2s;
}

.btn-submit:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.login-prompt {
  text-align: center;
  padding: 1.5rem;
  background: #f9fafb;
  border-radius: 0.5rem;
}

.login-prompt p {
  margin-bottom: 1rem;
  color: #6b7280;
}

.btn-login {
  padding: 0.5rem 1.5rem;
  background: #667eea;
  color: white;
  text-decoration: none;
  border-radius: 0.375rem;
}
</style>
```

### 11.4.3 è¯„è®ºåˆ—è¡¨ç»„ä»¶

åˆ›å»º `frontend/app/components/comment/CommentList.vue`ï¼š

```vue
<!-- frontend/app/components/comment/CommentList.vue -->
<template>
  <div class="comment-list">
    <!-- åŠ è½½ä¸­ -->
    <div v-if="loading" class="loading">
      åŠ è½½è¯„è®ºä¸­...
    </div>
    
    <!-- è¯„è®ºåˆ—è¡¨ -->
    <div v-else-if="comments.length > 0" class="comments">
      <CommentItem
        v-for="comment in comments"
        :key="comment.id"
        :comment="comment"
        @delete="handleDelete"
      />
    </div>
    
    <!-- ç©ºçŠ¶æ€ -->
    <div v-else class="empty">
      <p>ğŸ“ è¿˜æ²¡æœ‰è¯„è®ºï¼Œæ¥å‘è¡¨ç¬¬ä¸€æ¡å§ï¼</p>
    </div>
  </div>
</template>

<script setup>
defineProps({
  comments: {
    type: Array,
    default: () => []
  },
  loading: {
    type: Boolean,
    default: false
  }
})

const emit = defineEmits(['comment-deleted'])

function handleDelete(commentId) {
  emit('comment-deleted', commentId)
}
</script>

<style scoped>
.loading,
.empty {
  text-align: center;
  padding: 2rem;
  color: #6b7280;
}

.comments {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}
</style>
```

### 11.4.4 å•æ¡è¯„è®ºç»„ä»¶

åˆ›å»º `frontend/app/components/comment/CommentItem.vue`ï¼š

```vue
<!-- frontend/app/components/comment/CommentItem.vue -->
<template>
  <div class="comment-item">
    <div class="comment-avatar">
      {{ comment.user?.username?.charAt(0).toUpperCase() || '?' }}
    </div>
    
    <div class="comment-body">
      <div class="comment-header">
        <span class="username">{{ comment.user?.username || 'æœªçŸ¥ç”¨æˆ·' }}</span>
        <span class="time">{{ comment.created_at }}</span>
      </div>
      
      <div class="comment-content">
        {{ comment.content }}
      </div>
      
      <div class="comment-actions">
        <button 
          v-if="canDelete" 
          @click="handleDelete"
          class="btn-delete"
          :disabled="isDeleting"
        >
          {{ isDeleting ? 'åˆ é™¤ä¸­...' : 'åˆ é™¤' }}
        </button>
      </div>
    </div>
  </div>
</template>

<script setup>
const props = defineProps({
  comment: {
    type: Object,
    required: true
  }
})

const emit = defineEmits(['delete'])

const { user, token, isLoggedIn } = useAuth()

// æ˜¯å¦å¯ä»¥åˆ é™¤ï¼ˆåªèƒ½åˆ é™¤è‡ªå·±çš„è¯„è®ºï¼‰
const canDelete = computed(() => {
  return isLoggedIn.value && user.value?.id === props.comment.user?.id
})

const isDeleting = ref(false)

async function handleDelete() {
  if (!confirm('ç¡®å®šè¦åˆ é™¤è¿™æ¡è¯„è®ºå—ï¼Ÿ')) return
  
  isDeleting.value = true
  
  try {
    await $fetch(`http://localhost:8000/api/comments/${props.comment.id}`, {
      method: 'DELETE',
      headers: {
        Authorization: `Bearer ${token.value}`
      }
    })
    
    emit('delete', props.comment.id)
  } catch (error) {
    alert('åˆ é™¤å¤±è´¥ï¼š' + (error.data?.detail || 'æœªçŸ¥é”™è¯¯'))
  } finally {
    isDeleting.value = false
  }
}
</script>

<style scoped>
.comment-item {
  display: flex;
  gap: 1rem;
  padding: 1rem;
  background: #f9fafb;
  border-radius: 0.5rem;
}

.comment-avatar {
  width: 36px;
  height: 36px;
  background: #e5e7eb;
  color: #6b7280;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  flex-shrink: 0;
}

.comment-body {
  flex: 1;
  min-width: 0;
}

.comment-header {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  margin-bottom: 0.5rem;
}

.username {
  font-weight: 600;
  color: #374151;
}

.time {
  font-size: 0.875rem;
  color: #9ca3af;
}

.comment-content {
  color: #4b5563;
  line-height: 1.6;
  word-break: break-word;
}

.comment-actions {
  margin-top: 0.5rem;
}

.btn-delete {
  padding: 0.25rem 0.5rem;
  font-size: 0.75rem;
  color: #dc2626;
  background: transparent;
  border: 1px solid #fecaca;
  border-radius: 0.25rem;
  cursor: pointer;
}

.btn-delete:hover {
  background: #fef2f2;
}

.btn-delete:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}
</style>
```

## 11.5 é›†æˆåˆ°æ–‡ç« è¯¦æƒ…é¡µ

ä¿®æ”¹ `frontend/app/pages/blog/[id].vue`ï¼Œåœ¨æ–‡ç« åº•éƒ¨æ·»åŠ è¯„è®ºåŒºï¼š

```vue
<!-- åœ¨æ–‡ç« å†…å®¹åé¢æ·»åŠ  -->
<template>
  <div class="article-page">
    <!-- åŸæœ‰çš„æ–‡ç« å†…å®¹ -->
    <article class="article-detail">
      <!-- ... æ–‡ç« æ ‡é¢˜ã€å†…å®¹ç­‰ ... -->
    </article>
    
    <!-- è¯„è®ºåŒº -->
    <CommentSection :article-id="articleId" />
  </div>
</template>

<script setup>
const route = useRoute()
const articleId = computed(() => Number(route.params.id))

// ... å…¶ä»–ä»£ç 
</script>
```

::: tip ç»„ä»¶è‡ªåŠ¨å¯¼å…¥
Nuxt ä¼šè‡ªåŠ¨å¯¼å…¥ `components/` ç›®å½•ä¸‹çš„ç»„ä»¶ï¼Œæ‰€ä»¥ä¸éœ€è¦æ‰‹åŠ¨ import `CommentSection`ã€‚

ä½†æ˜¯ç”±äºæˆ‘ä»¬æŠŠç»„ä»¶æ”¾åœ¨ `components/comment/` å­ç›®å½•ä¸‹ï¼Œç»„ä»¶åä¼šå¸¦ä¸Šç›®å½•å‰ç¼€ï¼Œå˜æˆ `CommentCommentSection`ã€‚

ä¸ºäº†é¿å…è¿™ç§å†—ä½™ï¼Œæˆ‘ä»¬å¯ä»¥ï¼š
1. ç›´æ¥æŠŠç»„ä»¶æ”¾åœ¨ `components/` æ ¹ç›®å½•
2. æˆ–è€…åœ¨ `nuxt.config.ts` ä¸­é…ç½®ç»„ä»¶è·¯å¾„å‰ç¼€
:::

## 11.6 è¯„è®ºåŠŸèƒ½å¼€å…³æ¼”ç¤º

### 11.6.1 å…¨å±€å…³é—­è¯„è®º

åªéœ€ä¿®æ”¹ `backend/src/backend/config.py`ï¼š

```python
FEATURES = {
    "comment": False,  # æ”¹ä¸º False å³å¯å…³é—­
    "like": False,
}
```

é‡å¯åç«¯æœåŠ¡ï¼Œè¯„è®ºåŒºå°±ä¼šæ˜¾ç¤º"è¯„è®ºåŠŸèƒ½å½“å‰æœªå¼€å¯"ã€‚

### 11.6.2 å•ç¯‡æ–‡ç« å…³é—­è¯„è®º

æˆ‘ä»¬ç»™ Article æ¨¡å‹æ·»åŠ äº† `allow_comment` å­—æ®µï¼Œå¯ä»¥é’ˆå¯¹å•ç¯‡æ–‡ç« å…³é—­è¯„è®ºã€‚

åœ¨å‘å¸ƒ/ç¼–è¾‘æ–‡ç« æ—¶ï¼Œå¯ä»¥æ·»åŠ ä¸€ä¸ªå¼€å…³ï¼š

```vue
<!-- åœ¨å‘å¸ƒé¡µé¢è¡¨å•ä¸­æ·»åŠ  -->
<div class="form-group checkbox-group">
  <label>
    <input type="checkbox" v-model="form.allowComment">
    å…è®¸è¯„è®º
  </label>
</div>
```

åç«¯ API ç›¸åº”åœ°æ”¯æŒè¿™ä¸ªå­—æ®µå³å¯ã€‚

### 11.6.3 æ’ä»¶åŒ–çš„ä»·å€¼

ç°åœ¨ä½ å¯ä»¥ä½“ä¼šåˆ°æ’ä»¶åŒ–è®¾è®¡çš„å¥½å¤„äº†ï¼š
- âœ… ä¸€è¡Œé…ç½®å°±èƒ½å¼€å…³åŠŸèƒ½
- âœ… ä¸éœ€è¦åˆ é™¤ä»»ä½•ä»£ç 
- âœ… å¯ä»¥æŒ‰æ–‡ç« çº§åˆ«æ§åˆ¶
- âœ… æœªæ¥æ·»åŠ æ–°åŠŸèƒ½ï¼ˆç‚¹èµã€æ”¶è—ï¼‰ä¹Ÿæ˜¯åŒæ ·çš„æ¨¡å¼


## 11.7 æ‰©å±•ç»ƒä¹ ï¼šç‚¹èµåŠŸèƒ½

::: tip ç»ƒä¹ æç¤º
ç°åœ¨è½®åˆ°ä½ äº†ï¼æ ¹æ®è¯„è®ºåŠŸèƒ½çš„å®ç°æ¨¡å¼ï¼Œå°è¯•è‡ªå·±å®ç°ç‚¹èµåŠŸèƒ½ã€‚è¿™æ˜¯å·©å›ºæœ¬ç« çŸ¥è¯†çš„æœ€ä½³æ–¹å¼ã€‚
:::

### 11.7.1 è®¾è®¡æ€è·¯

**æ•°æ®åº“è®¾è®¡**ï¼š

```mermaid
erDiagram
    Like {
        int id PK
        int user_id FK
        int article_id FK
        string created_at
    }
    
    User {
        int id PK
    }
    
    Article {
        int id PK
    }
    
    Like ||--|| User : "user_id â†’ User.id"
    Like ||--|| Article : "article_id â†’ Article.id"
    
    %% çº¦æŸï¼šuser_id + article_id è”åˆå”¯ä¸€ï¼ˆé˜²æ­¢é‡å¤ç‚¹èµï¼‰
```

**æ ¸å¿ƒé€»è¾‘**ï¼š
- ç‚¹èµæ˜¯ toggle æ“ä½œï¼šå¦‚æœæ²¡èµè¿‡å°±ç‚¹èµï¼Œèµè¿‡äº†å°±å–æ¶ˆ
- éœ€è¦è¿”å›å½“å‰ç‚¹èµçŠ¶æ€å’Œæ€»ç‚¹èµæ•°
- ä½¿ç”¨ä¹è§‚æ›´æ–°æå‡ä½“éªŒ

### 11.7.2 åç«¯å®ç°æç¤º

**Like æ¨¡å‹**ï¼š

```python
class Like(Base):
    __tablename__ = "likes"
    
    id = Column(Integer, primary_key=True)
    user_id = Column(Integer, ForeignKey("users.id"))
    article_id = Column(Integer, ForeignKey("articles.id"))
    created_at = Column(String(20))
    
    # è”åˆå”¯ä¸€çº¦æŸ
    __table_args__ = (
        UniqueConstraint('user_id', 'article_id', name='unique_user_article_like'),
    )
```

**API ç«¯ç‚¹**ï¼š

```python
# POST /api/articles/{id}/like - ç‚¹èµ/å–æ¶ˆç‚¹èµ
# è¿”å›ï¼š{ liked: boolean, total: number }
```

### 11.7.3 å‰ç«¯å®ç°æç¤º

**LikeButton ç»„ä»¶**ï¼š

```vue
<template>
  <button @click="toggleLike" :class="{ liked: isLiked }">
    {{ isLiked ? 'â¤ï¸' : 'ğŸ¤' }} {{ likeCount }}
  </button>
</template>
```

**ä¹è§‚æ›´æ–°**ï¼šå…ˆæ›´æ–° UIï¼Œå†å‘è¯·æ±‚ã€‚å¦‚æœè¯·æ±‚å¤±è´¥ï¼Œå›æ»šçŠ¶æ€ã€‚

```javascript
async function toggleLike() {
  // ä¹è§‚æ›´æ–°
  const previousLiked = isLiked.value
  const previousCount = likeCount.value
  
  isLiked.value = !isLiked.value
  likeCount.value += isLiked.value ? 1 : -1
  
  try {
    await $fetch(...)
  } catch (error) {
    // å›æ»š
    isLiked.value = previousLiked
    likeCount.value = previousCount
  }
}
```

### 11.7.4 æŒ‘æˆ˜ä»»åŠ¡

å®ç°å®Œç‚¹èµåï¼Œå¯ä»¥å°è¯•ï¼š
1. **çƒ­é—¨æ–‡ç« æ’è¡Œæ¦œ**ï¼šæŒ‰ç‚¹èµæ•°æ’åº
2. **ç‚¹èµåŠ¨ç”»**ï¼šç‚¹èµæ—¶æœ‰å¿ƒå½¢é£˜åŠ¨æ•ˆæœ
3. **ç‚¹èµåˆ—è¡¨**ï¼šæ˜¾ç¤ºè°èµäº†è¿™ç¯‡æ–‡ç« 

## 11.8 å°ç»“ä¸ç»ƒä¹ 

::: important ğŸ‰ æ­å–œä½ å®Œæˆäº†æ’ä»¶åŒ–è¯„è®ºç³»ç»Ÿï¼
ç°åœ¨ä½ çš„åšå®¢å…·å¤‡äº†ï¼š
- âœ… **åŠŸèƒ½é…ç½®ä¸­å¿ƒ**ï¼šç»Ÿä¸€ç®¡ç†æ‰€æœ‰åŠŸèƒ½å¼€å…³
- âœ… **Feature Flag æ¨¡å¼**ï¼šåŠŸèƒ½å¯ä»¥éšæ—¶å¼€å…³
- âœ… **å®Œæ•´è¯„è®ºåŠŸèƒ½**ï¼šå‘è¡¨ã€åˆ é™¤ã€æƒé™æ§åˆ¶
- âœ… **æ’ä»¶åŒ–æ€ç»´**ï¼šä¸ºæœªæ¥æ‰©å±•æ‰“ä¸‹åŸºç¡€

ä½ å·²ç»æŒæ¡äº†ç°ä»£è½¯ä»¶å¼€å‘ä¸­éå¸¸é‡è¦çš„æ’ä»¶åŒ–æ¶æ„æ€æƒ³ï¼
:::

### æœ¬ç« å›é¡¾

| æ¦‚å¿µ | è¯´æ˜ |
|------|------|
| æ’ä»¶åŒ– | åŠŸèƒ½æ¨¡å—åŒ–ï¼Œå¯ç‹¬ç«‹å¼€å…³ |
| Feature Flag | åŠŸèƒ½å¼€å…³æ¨¡å¼ï¼Œæ§åˆ¶åŠŸèƒ½çš„å¯ç”¨/ç¦ç”¨ |
| é…ç½®ä¸­å¿ƒ | é›†ä¸­ç®¡ç†æ‰€æœ‰é…ç½®é¡¹ |
| XSS é˜²èŒƒ | é˜²æ­¢æ¶æ„è„šæœ¬æ³¨å…¥ |

### åŠ¨æ‰‹ç»ƒä¹ 

::: tip ç»ƒä¹ æç¤º
å¯ä»¥é€‚å½“ä½¿ç”¨ AI è¾…åŠ©ç¼–ç¨‹ï¼Œä½†æ˜¯åˆ‡è®°è¦ç‹¬ç«‹æ€è€ƒï¼
:::

**ç»ƒä¹  1ï¼šå®Œæ•´å®ç°ç‚¹èµåŠŸèƒ½** â­â­â­

æ ¹æ® 11.7 èŠ‚çš„è®¾è®¡æ€è·¯ï¼Œå®Œæ•´å®ç°ç‚¹èµåŠŸèƒ½ã€‚

**ç»ƒä¹  2ï¼šå®ç°è¯„è®ºåˆ†é¡µ** â­â­

å½“è¯„è®ºæ•°é‡å¾ˆå¤šæ—¶ï¼Œéœ€è¦åˆ†é¡µåŠ è½½ã€‚å®ç°"åŠ è½½æ›´å¤š"æŒ‰é’®ã€‚

æç¤ºï¼šä½¿ç”¨ `offset` å’Œ `limit` å‚æ•°

::: info ä¸‹ä¸€ç« é¢„å‘Š

åŠŸèƒ½éƒ½å®ç°äº†ï¼Œä½†åšå®¢çœ‹èµ·æ¥è¿˜æ˜¯æœ‰ç‚¹"ç´ "ï¼Ÿ

ä¸‹ä¸€ç« æˆ‘ä»¬å°†è¿›å…¥**æ ·å¼ç¾åŒ–ä¸å“åº”å¼è®¾è®¡**ï¼Œè®©åšå®¢å˜å¾—å¥½çœ‹èµ·æ¥ï¼
:::