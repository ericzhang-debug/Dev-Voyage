---
title: 'ç¬¬ 4 ç« ï¼šè®©é¡µé¢åŠ¨èµ·æ¥'
createTime: 2025/11/20 20:15:06
permalink: /fullstack-course/xgwcmjtx/
---
# ç¬¬ 4 ç« ï¼šè®©é¡µé¢åŠ¨èµ·æ¥

::: important æœ¬ç« å­¦ä¹ ç›®æ ‡
- ç†è§£ Vue çš„å“åº”å¼åŸç†ï¼ˆè¾¹åšè¾¹å­¦ï¼‰
- å®ç°æŒ‰é’®ç‚¹å‡»è·å–æ•°æ®
- å¤„ç†åŠ è½½çŠ¶æ€å’Œé”™è¯¯æƒ…å†µ
- å­¦ä¹  FastAPI è·¯ç”±å‚æ•°
- äº†è§£ Vibe Coding ä¸ AI è¾…åŠ©ç¼–ç¨‹
- ğŸ‰ **é‡ç‚¹ï¼šæ‰“é€ ä¸€ä¸ªçœŸæ­£å¯äº¤äº’çš„é¡µé¢ï¼**
:::

ä¸Šä¸€ç« æˆ‘ä»¬è®©å‰ç«¯æˆåŠŸè°ƒç”¨äº†åç«¯ APIï¼Œä½†é¡µé¢è¿˜æ˜¯"æ­»"çš„â€”â€”æ•°æ®åŠ è½½å®Œå°±ä¸åŠ¨äº†ã€‚è¿™ä¸€ç« æˆ‘ä»¬è¦è®©å®ƒ"æ´»"èµ·æ¥ï¼

::: tip æœ¬ç« ç»“æŸåä½ ä¼šå¾—åˆ°ä»€ä¹ˆ
ä¸€ä¸ªäº¤äº’å¼é¡µé¢ï¼šç‚¹å‡»æŒ‰é’®å¯ä»¥åˆ·æ–°æ•°æ®ã€æ˜¾ç¤ºåŠ è½½çŠ¶æ€ã€ä¼˜é›…å¤„ç†é”™è¯¯â€”â€”è¿™æ‰åƒä¸ªçœŸæ­£çš„åº”ç”¨ï¼
:::

---

## 4.1 Vue å“åº”å¼åŸºç¡€

::: info ä»€ä¹ˆæ˜¯"å“åº”å¼"ï¼Ÿ
ç®€å•è¯´ï¼Œå°±æ˜¯**æ•°æ®å˜äº†ï¼Œé¡µé¢è‡ªåŠ¨æ›´æ–°**ã€‚

ä½ æ”¹äº†ä¸€ä¸ªå˜é‡çš„å€¼ï¼Œç”¨åˆ°è¿™ä¸ªå˜é‡çš„åœ°æ–¹ä¼šè‡ªåŠ¨åˆ·æ–°æ˜¾ç¤ºã€‚ä¸éœ€è¦ä½ æ‰‹åŠ¨å»æ›´æ–° DOMã€‚
:::

### 4.1.1 refï¼šè®©æ•°æ®"æ´»"èµ·æ¥

åœ¨ Vue 3 ä¸­ï¼Œæˆ‘ä»¬ç”¨ `ref` æ¥åˆ›å»ºå“åº”å¼æ•°æ®ã€‚

æ‰“å¼€ `frontend/app/pages/index.vue`ï¼Œæˆ‘ä»¬æ¥æ”¹é€ å®ƒï¼š

```vue
<template>
  <div class="container">
    <h1 class="title">ğŸ‰ æˆ‘çš„ç¬¬ä¸€ä¸ªå…¨æ ˆé¡µé¢</h1>

    <!-- æ˜¾ç¤ºè®¡æ•°å™¨ -->
    <div class="counter"> // [!code ++]
      <p>ä½ ç‚¹å‡»äº† <strong>{{ count }}</strong> æ¬¡</p> // [!code ++]
      <button @click="count++">ç‚¹æˆ‘ +1</button> // [!code ++]
    </div> // [!code ++]

    <!-- æ˜¾ç¤ºåç«¯è¿”å›çš„æ•°æ® -->
    <div v-if="pending" class="loading">åŠ è½½ä¸­...</div> // [!code highlight]
    <div v-else-if="error" class="error">å‡ºé”™äº†ï¼š{{ error.message }}</div> // [!code highlight]
    <div v-else class="greeting">
      {{ data?.text }}
    </div>

    <p class="hint">ğŸ‘† è¿™æ®µæ–‡å­—æ˜¯ä»åç«¯ API è·å–çš„ï¼</p>
  </div>
</template>

<script setup>
// åˆ›å»ºä¸€ä¸ªå“åº”å¼å˜é‡
const count = ref(0) // [!code ++]

// è°ƒç”¨åç«¯ API
const { data, pending, error } = await useFetch('http://localhost:8000/api/greeting')
</script>

<style scoped>
.container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  font-family: system-ui, sans-serif;
}

.title {
  font-size: 2.5rem;
  margin-bottom: 2rem;
}

.counter { /* [!code ++] */
  margin-bottom: 2rem; /* [!code ++] */
  text-align: center; /* [!code ++] */
} /* [!code ++] */

.counter button { /* [!code ++] */
  margin-top: 0.5rem; /* [!code ++] */
  padding: 0.5rem 1.5rem; /* [!code ++] */
  font-size: 1rem; /* [!code ++] */
  background: #42b883; /* [!code ++] */
  color: white; /* [!code ++] */
  border: none; /* [!code ++] */
  border-radius: 0.5rem; /* [!code ++] */
  cursor: pointer; /* [!code ++] */
} /* [!code ++] */

.counter button:hover { /* [!code ++] */
  background: #3aa876; /* [!code ++] */
} /* [!code ++] */

.loading { /* [!code ++] */
  color: #666; /* [!code ++] */
  font-size: 1.2rem; /* [!code ++] */
} /* [!code ++] */

.error { /* [!code ++] */
  color: #e74c3c; /* [!code ++] */
  font-size: 1.2rem; /* [!code ++] */
} /* [!code ++] */

.greeting {
  font-size: 1.5rem;
  padding: 1rem 2rem;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border-radius: 1rem;
  margin-bottom: 1rem;
}

.hint {
  color: #666;
  font-size: 0.9rem;
}
</style>
```

::: warning çœ‹åˆ°æ•ˆæœäº†å—ï¼Ÿ
ä¿å­˜åï¼Œé¡µé¢åº”è¯¥å‡ºç°ä¸€ä¸ªè®¡æ•°å™¨ã€‚ç‚¹å‡»æŒ‰é’®ï¼Œæ•°å­—ä¼šè‡ªåŠ¨å¢åŠ ï¼

è¿™å°±æ˜¯å“åº”å¼çš„é­”åŠ›ï¼šä½ åªéœ€è¦æ”¹ `count` çš„å€¼ï¼Œé¡µé¢è‡ªåŠ¨æ›´æ–°ã€‚
:::

### 4.1.2 ç†è§£ ref

```javascript
// åˆ›å»ºå“åº”å¼å˜é‡
const count = ref(0) 

// åœ¨æ¨¡æ¿ä¸­ç›´æ¥ä½¿ç”¨ 
{{ count }}  // æ˜¾ç¤º 0 

// åœ¨ script ä¸­éœ€è¦ç”¨ .value
count.value++  // å˜æˆ 1
```

::: tip ä¸ºä»€ä¹ˆæ¨¡æ¿é‡Œä¸ç”¨ .valueï¼Ÿ
Vue å¸®ä½ è‡ªåŠ¨å¤„ç†äº†ã€‚åœ¨ `<template>` é‡Œå¯ä»¥ç›´æ¥ç”¨ `count`ï¼Œåœ¨ `<script>` é‡Œè¦ç”¨ `count.value`ã€‚

è¿™æ˜¯ Vue 3 çš„è®¾è®¡ï¼Œæˆ‘ä»¬åªéœ€è¦å…³æ³¨æ•°æ®ï¼Œè€ŒVue ä¼šè‡ªåŠ¨å¤„ç† DOM æ›´æ–°ã€‚
:::

---

## 4.2 æŒ‰é’®ç‚¹å‡»åˆ·æ–°æ•°æ®

ç°åœ¨è®¡æ•°å™¨èƒ½åŠ¨äº†ï¼Œä½†åç«¯æ•°æ®è¿˜æ˜¯ä¸€æ¬¡æ€§åŠ è½½çš„ã€‚è®©æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªæŒ‰é’®æ¥æ‰‹åŠ¨åˆ·æ–°æ•°æ®ï¼

### 4.2.1 åç«¯ï¼šæ·»åŠ éšæœºé—®å€™è¯­

å…ˆè®©åç«¯è¿”å›ä¸åŒçš„æ•°æ®ï¼Œè¿™æ ·æˆ‘ä»¬æ‰èƒ½çœ‹å‡ºåˆ·æ–°æ•ˆæœã€‚

ä¿®æ”¹ `backend/src/backend/__init__.py`ï¼š

```python
from fastapi import FastAPI
from fastapi.middleware.cors import CORSMiddleware
import random # [!code ++]

app = FastAPI()

# é…ç½®è·¨åŸŸ
app.add_middleware(
    CORSMiddleware,
    allow_origins=["http://localhost:3000"],
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)

# é—®å€™è¯­åˆ—è¡¨ // [!code ++]
greetings = [ // [!code ++]
    "ä½ å¥½ï¼Œè¿™æ˜¯æ¥è‡ªåç«¯çš„é—®å€™ï¼", // [!code ++]
    "æ¬¢è¿æ¥åˆ°å…¨æ ˆå¼€å‘çš„ä¸–ç•Œï¼", // [!code ++]
    "ä»Šå¤©ä¹Ÿè¦åŠ æ²¹å†™ä»£ç å“¦ï¼", // [!code ++]
    "ä¼‘æ¯ä¸€ä¸‹ï¼Œå–æ¯æ°´å§ï½", // [!code ++]
    "ä»£ç å†™ç´¯äº†ï¼Ÿå‡ºå»èµ°èµ°ï¼", // [!code ++]
    "ä½ å·²ç»å¾ˆæ£’äº†ï¼Œç»§ç»­ä¿æŒï¼", // [!code ++]
] // [!code ++]

@app.get("/")
async def root():
    return {"message": "Hello World!"}`

@app.get("/api/greeting") // [!code highlight]
async def greeting(): // [!code highlight]
    # éšæœºè¿”å›ä¸€æ¡é—®å€™è¯­ // [!code ++]
    text = random.choice(greetings) // [!code ++]
    return {"text": text} // [!code ++]
```

::: tip å°æŠ€å·§
`random.choice()` ä¼šä»åˆ—è¡¨ä¸­éšæœºé€‰ä¸€ä¸ªå…ƒç´ ã€‚æ¯æ¬¡è°ƒç”¨ API éƒ½ä¼šè¿”å›ä¸åŒçš„é—®å€™è¯­ï¼
:::

### 4.2.2 å‰ç«¯ï¼šæ·»åŠ åˆ·æ–°æŒ‰é’®

ä¿®æ”¹ `frontend/app/pages/index.vue`ï¼š

```vue
<template>
  <div class="container">
    <h1 class="title">ğŸ‰ æˆ‘çš„ç¬¬ä¸€ä¸ªå…¨æ ˆé¡µé¢</h1>

    <!-- è®¡æ•°å™¨ -->
    <div class="counter">
      <p>ä½ ç‚¹å‡»äº† <strong>{{ count }}</strong> æ¬¡</p>
      <button @click="count++">ç‚¹æˆ‘ +1</button>
    </div>

    <!-- é—®å€™è¯­å±•ç¤º -->
    <div class="greeting-box">
      <div v-if="pending" class="loading">
        â³ åŠ è½½ä¸­...
      </div>
      <div v-else-if="error" class="error">
        âŒ å‡ºé”™äº†ï¼š{{ error.message }}
      </div>
      <div v-else class="greeting">
        {{ data?.text }}
      </div>

      <!-- åˆ·æ–°æŒ‰é’® -->
      <button class="refresh-btn" @click="refresh" :disabled="pending"> <!-- [!code focus] -->
        {{ pending ? 'åˆ·æ–°ä¸­...' : 'ğŸ”„ æ¢ä¸€å¥' }} <!-- [!code focus] -->
      </button> <!-- [!code focus] -->
    </div>

    <p class="hint">ğŸ‘† ç‚¹å‡»æŒ‰é’®è·å–æ–°çš„é—®å€™è¯­ï¼</p>
  </div>
</template>

<script setup>
// è®¡æ•°å™¨
const count = ref(0)

// è°ƒç”¨åç«¯ APIï¼ŒuseFetch è¿”å›çš„ refresh å‡½æ•°å¯ä»¥é‡æ–°è¯·æ±‚
const { data, pending, error, refresh } = await useFetch('http://localhost:8000/api/greeting') // [!code focus]
</script>

<style scoped>
.container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  font-family: system-ui, sans-serif;
  padding: 2rem;
}

.title {
  font-size: 2.5rem;
  margin-bottom: 2rem;
}

.counter {
  margin-bottom: 2rem;
  text-align: center;
}

.counter button {
  margin-top: 0.5rem;
  padding: 0.5rem 1.5rem;
  font-size: 1rem;
  background: #42b883;
  color: white;
  border: none;
  border-radius: 0.5rem;
  cursor: pointer;
  transition: background 0.2s;
}

.counter button:hover {
  background: #3aa876;
}

.greeting-box {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1rem;
}

.loading {
  color: #666;
  font-size: 1.2rem;
  padding: 1rem 2rem;
}

.error {
  color: #e74c3c;
  font-size: 1.2rem;
  padding: 1rem 2rem;
  background: #fdeaea;
  border-radius: 1rem;
}

.greeting {
  font-size: 1.5rem;
  padding: 1rem 2rem;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border-radius: 1rem;
  text-align: center;
  min-width: 300px;
}

.refresh-btn { /* [!code focus] */
  padding: 0.75rem 1.5rem; /* [!code focus] */
  font-size: 1rem; /* [!code focus] */
  background: #3498db; /* [!code focus] */
  color: white; /* [!code focus] */
  border: none; /* [!code focus] */
  border-radius: 0.5rem; /* [!code focus] */
  cursor: pointer; /* [!code focus] */
  transition: all 0.2s; /* [!code focus] */
} /* [!code focus] */

.refresh-btn:hover:not(:disabled) { /* [!code focus] */
  background: #2980b9; /* [!code focus] */
  transform: scale(1.05); /* [!code focus] */
} /* [!code focus] */

.refresh-btn:disabled { /* [!code focus] */
  background: #bdc3c7; /* [!code focus] */
  cursor: not-allowed; /* [!code focus] */
} /* [!code focus] */

.hint {
  color: #666;
  font-size: 0.9rem;
  margin-top: 1rem;
}
</style>
```

::: important ğŸ‰ è¯•è¯•çœ‹ï¼
ä¿å­˜ååˆ·æ–°é¡µé¢ï¼Œç‚¹å‡»"æ¢ä¸€å¥"æŒ‰é’®ï¼Œä½ ä¼šçœ‹åˆ°é—®å€™è¯­åœ¨å˜åŒ–ï¼

æ³¨æ„è§‚å¯Ÿï¼š
1. ç‚¹å‡»æŒ‰é’®æ—¶æ˜¾ç¤º"åˆ·æ–°ä¸­..."
2. æŒ‰é’®åœ¨è¯·æ±‚æ—¶ä¼šç¦ç”¨ï¼ˆé˜²æ­¢é‡å¤ç‚¹å‡»ï¼‰
3. è¯·æ±‚å®Œæˆåæ˜¾ç¤ºæ–°çš„é—®å€™è¯­
:::

---

## 4.3 useFetch è¯¦è§£

åˆšæ‰æˆ‘ä»¬ç”¨äº† `useFetch`ï¼Œå®ƒæ˜¯ Nuxt æä¾›çš„æ•°æ®è·å–å·¥å…·ï¼Œéå¸¸å¼ºå¤§ã€‚

### 4.3.1 è¿”å›å€¼è¯´æ˜

```javascript
const { data, pending, error, refresh } = await useFetch('/api/xxx')
```

| è¿”å›å€¼ | ç±»å‹ | è¯´æ˜ |
|-------|------|------|
| `data` | `Ref` | å“åº”æ•°æ® |
| `pending` | `Ref<boolean>` | æ˜¯å¦æ­£åœ¨åŠ è½½ |
| `error` | `Ref` | é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æœæœ‰ï¼‰ |
| `refresh` | `Function` | é‡æ–°è¯·æ±‚çš„å‡½æ•° |

### 4.3.2 ä¸ºä»€ä¹ˆç”¨ awaitï¼Ÿ

```javascript
// è¿™æ ·å†™ä¼šç­‰å¾…ç¬¬ä¸€æ¬¡è¯·æ±‚å®Œæˆ
const { data } = await useFetch('/api/xxx')

// é¡µé¢æ¸²æŸ“æ—¶ï¼Œdata å·²ç»æœ‰å€¼äº†
```

::: tip æœåŠ¡ç«¯æ¸²æŸ“ (SSR)
Nuxt é»˜è®¤å¼€å¯ SSRï¼Œæ„å‘³ç€é¡µé¢åœ¨æœåŠ¡å™¨ä¸Šæ¸²æŸ“å¥½å†å‘ç»™æµè§ˆå™¨ã€‚

`await useFetch` ä¼šåœ¨æœåŠ¡å™¨ä¸Šç­‰å¾…æ•°æ®åŠ è½½å®Œæˆï¼Œè¿™æ ·ç”¨æˆ·çœ‹åˆ°çš„é¡µé¢ç›´æ¥å°±æœ‰æ•°æ®ï¼Œä½“éªŒæ›´å¥½ï¼Œå¯¹ SEO ä¹Ÿæ›´å‹å¥½ã€‚
:::

---

## 4.4 FastAPI è·¯ç”±å‚æ•°

ç°åœ¨åç«¯åªæœ‰ä¸€ä¸ªå›ºå®šçš„ APIã€‚å¦‚æœæˆ‘ä»¬æƒ³æ ¹æ®ç”¨æˆ·è¾“å…¥è¿”å›ä¸åŒçš„æ•°æ®å‘¢ï¼Ÿ

### 4.4.1 è·¯å¾„å‚æ•°

ä¿®æ”¹ `backend/src/backend/__init__.py`ï¼Œæ·»åŠ æ–°çš„ APIï¼š

```python
@app.get("/api/hello/{name}") # [!code focus]
async def hello(name: str): # [!code focus]
    return {"message": f"ä½ å¥½ï¼Œ{name}ï¼æ¬¢è¿æ¥åˆ°å…¨æ ˆä¸–ç•Œï¼"} # [!code focus]
```

ç°åœ¨è®¿é—® `http://localhost:8000/api/hello/å¼ ä¸‰`ï¼Œä¼šè¿”å›ï¼š

```json
{"message": "ä½ å¥½ï¼Œå¼ ä¸‰ï¼æ¬¢è¿æ¥åˆ°å…¨æ ˆä¸–ç•Œï¼"}
```

::: info è·¯å¾„å‚æ•°è¯­æ³•
`{name}` æ˜¯è·¯å¾„å‚æ•°çš„å ä½ç¬¦ï¼ŒFastAPI ä¼šè‡ªåŠ¨æŠŠ URL ä¸­å¯¹åº”ä½ç½®çš„å€¼èµ‹ç»™å‡½æ•°å‚æ•° `name`ã€‚

è€Œä¸” FastAPI ä¼šè‡ªåŠ¨è¿›è¡Œç±»å‹è½¬æ¢å’ŒéªŒè¯ï¼
:::

### 4.4.2 æŸ¥è¯¢å‚æ•°

å†æ·»åŠ ä¸€ä¸ªå¸¦æŸ¥è¯¢å‚æ•°çš„ APIï¼š

```python
@app.get("/api/greet") # [!code focus]
async def greet(name: str = "æœ‹å‹", mood: str = "å¼€å¿ƒ"): # [!code focus]
    moods = { # [!code focus]
        "å¼€å¿ƒ": "ğŸ˜„", # [!code focus]
        "éš¾è¿‡": "ğŸ˜¢", # [!code focus]
        "ç”Ÿæ°”": "ğŸ˜ ", # [!code focus]
        "æƒŠè®¶": "ğŸ˜²", # [!code focus]
    } # [!code focus]
    emoji = moods.get(mood, "ğŸ˜Š") # [!code focus]
    return {"message": f"{emoji} ä½ å¥½ï¼Œ{name}ï¼ä»Šå¤©{mood}å—ï¼Ÿ"} # [!code focus]
```

è®¿é—®æ–¹å¼ï¼š
- `http://localhost:8000/api/greet` â†’ ä½¿ç”¨é»˜è®¤å€¼
- `http://localhost:8000/api/greet?name=å°æ˜` â†’ æŒ‡å®š name
- `http://localhost:8000/api/greet?name=å°æ˜&mood=æƒŠè®¶` â†’ æŒ‡å®š name å’Œ mood

::: tip è·¯å¾„å‚æ•° vs æŸ¥è¯¢å‚æ•°
- **è·¯å¾„å‚æ•°**ï¼š`/api/hello/{name}` â†’ `/api/hello/å¼ ä¸‰`
- **æŸ¥è¯¢å‚æ•°**ï¼š`/api/greet?name=å¼ ä¸‰` â†’ ç”¨ `?` å’Œ `&` è¿æ¥

ä¸€èˆ¬æ¥è¯´ï¼Œå¿…é¡»çš„å‚æ•°ç”¨è·¯å¾„å‚æ•°ï¼Œå¯é€‰çš„å‚æ•°ç”¨æŸ¥è¯¢å‚æ•°ã€‚
:::

### 4.4.3 å‰ç«¯è°ƒç”¨å¸¦å‚æ•°çš„ API

ä¿®æ”¹ `frontend/app/pages/index.vue`ï¼Œæ·»åŠ è¾“å…¥æ¡†å’Œä¸ªæ€§åŒ–é—®å€™ï¼š

```vue
<template>
  <div class="container">
    <h1 class="title">ğŸ‰ æˆ‘çš„ç¬¬ä¸€ä¸ªå…¨æ ˆé¡µé¢</h1>

    <!-- ä¸ªæ€§åŒ–é—®å€™ -->
    <div class="name-input"> // [!code ++]
      <input // [!code ++]
        v-model="userName" // [!code ++]
        type="text" // [!code ++]
        placeholder="è¾“å…¥ä½ çš„åå­—" // [!code ++]
        @keyup.enter="fetchGreeting" // [!code ++]
      /> // [!code ++]
      <button @click="fetchGreeting" :disabled="!userName || greetPending"> // [!code ++]
        {{ greetPending ? 'è¯·æ±‚ä¸­...' : 'æ‰“ä¸ªæ‹›å‘¼' }} // [!code ++]
      </button> // [!code ++]
    </div> // [!code ++]

    <div v-if="greetData" class="personal-greeting"> // [!code ++]
      {{ greetData.message }} // [!code ++]
    </div> // [!code ++]

    <hr class="divider" /> // [!code ++]

    <!-- éšæœºé—®å€™è¯­ -->
    <div class="greeting-box">
      <div v-if="pending" class="loading">â³ åŠ è½½ä¸­...</div>
      <div v-else-if="error" class="error">âŒ å‡ºé”™äº†ï¼š{{ error.message }}</div>
      <div v-else class="greeting">{{ data?.text }}</div>

      <button class="refresh-btn" @click="refresh" :disabled="pending">
        {{ pending ? 'åˆ·æ–°ä¸­...' : 'ğŸ”„ æ¢ä¸€å¥' }}
      </button>
    </div>
  </div>
</template>

<script setup>
// ç”¨æˆ·åè¾“å…¥
const userName = ref('') // [!code ++]

// ä¸ªæ€§åŒ–é—®å€™
const greetData = ref(null) // [!code ++]
const greetPending = ref(false) // [!code ++]

async function fetchGreeting() { // [!code ++]
  if (!userName.value) return // [!code ++]

  greetPending.value = true // [!code ++]
  try { // [!code ++]
    const response = await $fetch(`http://localhost:8000/api/hello/${userName.value}`) // [!code ++]
    greetData.value = response // [!code ++]
  } catch (e) { // [!code ++]
    console.error('è¯·æ±‚å¤±è´¥:', e) // [!code ++]
  } finally { // [!code ++]
    greetPending.value = false // [!code ++]
  } // [!code ++]
} // [!code ++]

// éšæœºé—®å€™è¯­
const { data, pending, error, refresh } = await useFetch('http://localhost:8000/api/greeting')
</script>

<style scoped>
.container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  font-family: system-ui, sans-serif;
  padding: 2rem;
}

.title {
  font-size: 2.5rem;
  margin-bottom: 2rem;
}

.name-input { /* [!code ++] */
  display: flex; /* [!code ++] */
  gap: 0.5rem; /* [!code ++] */
  margin-bottom: 1rem; /* [!code ++] */
} /* [!code ++] */

.name-input input { /* [!code ++] */
  padding: 0.75rem 1rem; /* [!code ++] */
  font-size: 1rem; /* [!code ++] */
  border: 2px solid #ddd; /* [!code ++] */
  border-radius: 0.5rem; /* [!code ++] */
  outline: none; /* [!code ++] */
  transition: border-color 0.2s; /* [!code ++] */
} /* [!code ++] */

.name-input input:focus { /* [!code ++] */
  border-color: #667eea; /* [!code ++] */
} /* [!code ++] */

.name-input button { /* [!code ++] */
  padding: 0.75rem 1.5rem; /* [!code ++] */
  font-size: 1rem; /* [!code ++] */
  background: #667eea; /* [!code ++] */
  color: white; /* [!code ++] */
  border: none; /* [!code ++] */
  border-radius: 0.5rem; /* [!code ++] */
  cursor: pointer; /* [!code ++] */
  transition: all 0.2s; /* [!code ++] */
} /* [!code ++] */

.name-input button:hover:not(:disabled) { /* [!code ++] */
  background: #5a6fd6; /* [!code ++] */
} /* [!code ++] */

.name-input button:disabled { /* [!code ++] */
  background: #bdc3c7; /* [!code ++] */
  cursor: not-allowed; /* [!code ++] */
} /* [!code ++] */

.personal-greeting { /* [!code ++] */
  font-size: 1.5rem; /* [!code ++] */
  padding: 1rem 2rem; /* [!code ++] */
  background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); /* [!code ++] */
  color: white; /* [!code ++] */
  border-radius: 1rem; /* [!code ++] */
  margin-bottom: 1rem; /* [!code ++] */
  animation: fadeIn 0.3s ease-in-out; /* [!code ++] */
} /* [!code ++] */

@keyframes fadeIn { /* [!code ++] */
  from { opacity: 0; transform: translateY(-10px); } /* [!code ++] */
  to { opacity: 1; transform: translateY(0); } /* [!code ++] */
} /* [!code ++] */

.divider { /* [!code ++] */
  width: 80%; /* [!code ++] */
  max-width: 400px; /* [!code ++] */
  border: none; /* [!code ++] */
  border-top: 2px dashed #ddd; /* [!code ++] */
  margin: 2rem 0; /* [!code ++] */
} /* [!code ++] */

.greeting-box {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1rem;
}

.loading {
  color: #666;
  font-size: 1.2rem;
}

.error {
  color: #e74c3c;
  font-size: 1.2rem;
  padding: 1rem 2rem;
  background: #fdeaea;
  border-radius: 1rem;
}

.greeting {
  font-size: 1.5rem;
  padding: 1rem 2rem;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border-radius: 1rem;
  text-align: center;
  min-width: 300px;
}

.refresh-btn {
  padding: 0.75rem 1.5rem;
  font-size: 1rem;
  background: #3498db;
  color: white;
  border: none;
  border-radius: 0.5rem;
  cursor: pointer;
  transition: all 0.2s;
}

.refresh-btn:hover:not(:disabled) {
  background: #2980b9;
  transform: scale(1.05);
}

.refresh-btn:disabled {
  background: #bdc3c7;
  cursor: not-allowed;
}
</style>
```

::: important ğŸ‰ æ­å–œï¼
ç°åœ¨ä½ çš„é¡µé¢çœŸæ­£"æ´»"èµ·æ¥äº†ï¼

è¯•è¯•çœ‹ï¼š
1. è¾“å…¥ä½ çš„åå­—ï¼Œç‚¹å‡»"æ‰“ä¸ªæ‹›å‘¼"
2. æŒ‰å›è½¦é”®ä¹Ÿèƒ½æäº¤
3. ç‚¹å‡»"æ¢ä¸€å¥"è·å–éšæœºé—®å€™è¯­
4. æ³¨æ„åŠ è½½çŠ¶æ€å’ŒæŒ‰é’®ç¦ç”¨çš„æ•ˆæœ
:::

---

## 4.5 ç†è§£ $fetch

åˆšæ‰æˆ‘ä»¬ç”¨äº† `$fetch`ï¼Œå®ƒå’Œ `useFetch` æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

```javascript
// useFetch - ç»„ä»¶çº§åˆ«çš„æ•°æ®è·å–ï¼Œå¸¦å“åº”å¼
const { data, pending, error, refresh } = await useFetch('/api/xxx')

// $fetch - æ›´åº•å±‚çš„è¯·æ±‚å‡½æ•°ï¼Œé€‚åˆåœ¨äº‹ä»¶å¤„ç†ä¸­ä½¿ç”¨
const response = await $fetch('/api/xxx')
```

::: tip ä»€ä¹ˆæ—¶å€™ç”¨å“ªä¸ªï¼Ÿ
- **useFetch**ï¼šé¡µé¢åŠ è½½æ—¶è·å–æ•°æ®ï¼Œéœ€è¦åŠ è½½çŠ¶æ€å’Œé”™è¯¯å¤„ç†
- **$fetch**ï¼šæŒ‰é’®ç‚¹å‡»ç­‰äº‹ä»¶è§¦å‘çš„è¯·æ±‚ï¼Œæ‰‹åŠ¨æ§åˆ¶çŠ¶æ€

ç®€å•è¯´ï¼šè‡ªåŠ¨çš„ç”¨ `useFetch`ï¼Œæ‰‹åŠ¨çš„ç”¨ `$fetch`ã€‚
:::

---

## 4.6 Vibe Codingï¼šè®© AI å¸®ä½ å†™ä»£ç 

::: info å†™äº†è¿™ä¹ˆå¤šä»£ç ï¼Œç´¯ä¸ç´¯ï¼Ÿ
ä»ç¬¬ 3 ç« åˆ°ç°åœ¨ï¼Œä½ å·²ç»å†™äº†ä¸å°‘ä»£ç äº†â€”â€”åˆ›å»ºé¡¹ç›®ã€é…ç½®è·¨åŸŸã€å†™ Vue ç»„ä»¶ã€å†™ FastAPI æ¥å£...

æœ‰æ²¡æœ‰æƒ³è¿‡ï¼š**èƒ½ä¸èƒ½è®© AI å¸®æˆ‘å†™ï¼Ÿ**

ç­”æ¡ˆæ˜¯ï¼š**å¯ä»¥ï¼** è€Œä¸”è¿™å·²ç»æˆä¸ºä¸€ç§æ–°çš„ç¼–ç¨‹æ–¹å¼ã€‚
:::

### 4.6.1 ä»€ä¹ˆæ˜¯ Vibe Codingï¼Ÿ

**Vibe Codingï¼ˆæ°›å›´ç¼–ç¨‹ï¼‰** æ˜¯ AI å¤§ç¥ Andrej Karpathy åœ¨ 2025 å¹´åˆæå‡ºçš„æ¦‚å¿µã€‚

ç®€å•è¯´å°±æ˜¯ï¼š**ç”¨è‡ªç„¶è¯­è¨€å‘Šè¯‰ AI ä½ æƒ³è¦ä»€ä¹ˆï¼Œè®© AI å¸®ä½ ç”Ÿæˆä»£ç ã€‚**

```
ä¼ ç»Ÿç¼–ç¨‹ï¼šä½ å†™æ¯ä¸€è¡Œä»£ç 
Vibe Codingï¼šä½ æè¿°éœ€æ±‚ï¼ŒAI å†™ä»£ç ï¼Œä½ å®¡æ ¸å’Œè°ƒæ•´
```

::: tip Andrej Karpathy æ˜¯è°ï¼Ÿ
- å‰ Tesla AI æ€»ç›‘
- OpenAI åˆ›å§‹æˆå‘˜ä¹‹ä¸€
- æ–¯å¦ç¦å¤§å­¦ CS231nï¼ˆæ·±åº¦å­¦ä¹ è¯¾ç¨‹ï¼‰è®²å¸ˆ

ä»–è¯´çš„è¯åœ¨ AI åœˆå­é‡Œè¿˜æ˜¯å¾ˆæœ‰åˆ†é‡çš„ã€‚
:::

### 4.6.2 å¸¸ç”¨çš„ AI ç¼–ç¨‹å·¥å…·

| å·¥å…· | ç‰¹ç‚¹ | é€‚åˆåœºæ™¯ |
|-----|------|---------|
| **GitHub Copilot** | VS Code æ’ä»¶ï¼Œå®æ—¶è¡¥å…¨ | å†™ä»£ç æ—¶è‡ªåŠ¨è¡¥å…¨ |
| **Cursor** | AI åŸç”Ÿç¼–è¾‘å™¨ï¼ŒåŸºäº VS Code | æ•´ä½“é¡¹ç›®å¼€å‘ |
| **Claude Code** | å‘½ä»¤è¡Œå·¥å…·ï¼Œæ“…é•¿ç†è§£ä¸Šä¸‹æ–‡ | å¤æ‚ä»»åŠ¡ã€é‡æ„ |
| **ChatGPT / Claude** | å¯¹è¯å¼ï¼Œè§£é‡Šå’Œç”Ÿæˆä»£ç  | å­¦ä¹ ã€é—®é—®é¢˜ |

::: tip å­¦ç”Ÿç¦åˆ©
GitHub Copilot å¯¹å­¦ç”Ÿå…è´¹ï¼ç”¨ä½ çš„å­¦æ ¡é‚®ç®±ç”³è¯· [GitHub Education](https://education.github.com/) å³å¯ã€‚
:::

### 4.6.3 Vibe Coding çš„æ­£ç¡®æ‰“å¼€æ–¹å¼

::: warning âš ï¸ é‡è¦è­¦å‘Šï¼šAI ä¸æ˜¯ä¸‡èƒ½çš„ï¼
æˆ‘è§è¿‡å¤ªå¤šè¿™æ ·çš„æƒ…å†µï¼š

- è®© AI å†™äº†ä¸€å¤§å †ä»£ç ï¼Œè‡ªå·±å®Œå…¨çœ‹ä¸æ‡‚
- AI ç”Ÿæˆçš„ä»£ç æœ‰ bugï¼Œä½†è‡ªå·±ä¸çŸ¥é“æ€ä¹ˆæ”¹
- è¿‡åº¦ä¾èµ– AIï¼ŒåŸºç¡€çŸ¥è¯†ä¸€ç‚¹æ²¡å­¦åˆ°
- é¢è¯•çš„æ—¶å€™è¢«é—®åŸºç¡€é—®é¢˜ï¼Œä¸€é—®ä¸‰ä¸çŸ¥

**AI æ˜¯å·¥å…·ï¼Œä¸æ˜¯æ›¿ä»£å“ã€‚**
:::

æ­£ç¡®çš„ä½¿ç”¨æ–¹å¼ï¼š

```
âœ… æ­£ç¡®                          âŒ é”™è¯¯
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
å…ˆç†è§£åŸç†ï¼Œå†ç”¨ AI åŠ é€Ÿ          ç›´æ¥è®© AI å†™ï¼Œå®Œå…¨ä¸çœ‹
è®© AI è§£é‡Šä»£ç ï¼Œå¸®åŠ©å­¦ä¹           å¤åˆ¶ç²˜è´´ï¼Œä¸ç®¡å¯¹é”™
ç”¨ AI å¤„ç†é‡å¤æ€§å·¥ä½œ              æ‰€æœ‰ä»£ç éƒ½è®© AI å†™
å®¡æ ¸ AI ç”Ÿæˆçš„æ¯ä¸€è¡Œä»£ç           ç›²ç›®ä¿¡ä»» AI çš„è¾“å‡º
```

### 4.6.4 ä¸€ä¸ªå®é™…çš„ä¾‹å­

æ¯”å¦‚ä½ æƒ³æ·»åŠ ä¸€ä¸ªæ–°åŠŸèƒ½ï¼š"åœ¨é¡µé¢ä¸Šæ˜¾ç¤ºå½“å‰æ—¶é—´ï¼Œæ¯ç§’æ›´æ–°"

**ä¼ ç»Ÿæ–¹å¼**ï¼šè‡ªå·±æŸ¥æ–‡æ¡£ã€å†™ä»£ç ã€è°ƒè¯•...

**Vibe Coding æ–¹å¼**ï¼š

```
ä½ ï¼šå¸®æˆ‘å†™ä¸€ä¸ª Vue 3 ç»„ä»¶ï¼Œæ˜¾ç¤ºå½“å‰æ—¶é—´ï¼Œæ¯ç§’è‡ªåŠ¨æ›´æ–°ã€‚
    ä½¿ç”¨ Composition API å’Œ <script setup> è¯­æ³•ã€‚

AIï¼šå¥½çš„ï¼Œè¿™æ˜¯ä»£ç ...ï¼ˆç”Ÿæˆä»£ç ï¼‰

ä½ ï¼šï¼ˆå®¡æ ¸ä»£ç ï¼‰è¿™é‡Œç”¨ setIntervalï¼Œç»„ä»¶é”€æ¯æ—¶éœ€è¦æ¸…ç†å—ï¼Ÿ

AIï¼šæ˜¯çš„ï¼Œéœ€è¦åœ¨ onUnmounted ä¸­æ¸…ç†...ï¼ˆè§£é‡Šå¹¶å®Œå–„ï¼‰
```

::: important å…³é”®ç‚¹
æ³¨æ„ä¸Šé¢çš„å¯¹è¯ï¼š
1. **ä½ çŸ¥é“è¦é—®ä»€ä¹ˆ**ï¼ˆVue 3ã€Composition APIã€script setupï¼‰
2. **ä½ èƒ½å®¡æ ¸ä»£ç **ï¼ˆå‘ç° setInterval éœ€è¦æ¸…ç†ï¼‰
3. **ä½ åœ¨å­¦ä¹ **ï¼ˆé€šè¿‡å’Œ AI å¯¹è¯ç†è§£åŸç†ï¼‰

è¿™æ‰æ˜¯ Vibe Coding çš„æ­£ç¡®å§¿åŠ¿ï¼
:::

### 4.6.5 ç»™åˆå­¦è€…çš„å»ºè®®

::: note å»ºè®®
1. **å‰å‡ ç« ä¸è¦ç”¨ AI å†™ä»£ç **â€”â€”å…ˆæŠŠåŸºç¡€æ‰“ç‰¢
2. **é‡åˆ°ä¸æ‡‚çš„å¯ä»¥é—® AI**â€”â€”è®©å®ƒè§£é‡Šä»£ç ï¼Œå¸®åŠ©å­¦ä¹ 
3. **åé¢ç†Ÿç»ƒäº†å†ç”¨ AI åŠ é€Ÿ**â€”â€”å¤„ç†é‡å¤æ€§å·¥ä½œ
4. **æ°¸è¿œä¿æŒå¥½å¥‡å¿ƒ**â€”â€”AI ç”Ÿæˆçš„ä»£ç ï¼Œè¦çŸ¥é“å®ƒä¸ºä»€ä¹ˆè¿™æ ·å†™
:::

è®°ä½ï¼š**ä¼šç”¨ AI çš„ç¨‹åºå‘˜** å’Œ **åªä¼šè®© AI å†™ä»£ç çš„äºº**ï¼Œæ˜¯å®Œå…¨ä¸åŒçš„ä¸¤ç§äººã€‚

å‰è€…æ˜¯é©¾é©­å·¥å…·çš„äººï¼Œåè€…æ˜¯è¢«å·¥å…·é©¾é©­çš„äººã€‚

---

## 4.7 å°ç»“

::: note æœ¬ç« å›é¡¾
- âœ… å­¦ä¹ äº† Vue çš„ `ref` å“åº”å¼å˜é‡
- âœ… ä½¿ç”¨ `useFetch` è·å–æ•°æ®å¹¶å¤„ç†åŠ è½½çŠ¶æ€
- âœ… å®ç°äº†æŒ‰é’®ç‚¹å‡»åˆ·æ–°æ•°æ®
- âœ… å­¦ä¹ äº† FastAPI çš„è·¯å¾„å‚æ•°å’ŒæŸ¥è¯¢å‚æ•°
- âœ… ç”¨ `$fetch` åœ¨äº‹ä»¶ä¸­å‘é€è¯·æ±‚
- âœ… äº†è§£äº† Vibe Coding å’Œ AI è¾…åŠ©ç¼–ç¨‹
- âœ… é¡µé¢çœŸæ­£å˜å¾—å¯äº¤äº’äº†ï¼
:::

::: important åŠ¨æ‰‹ç»ƒä¹ 
è¯•ç€æ‰©å±•ä¸€ä¸‹ï¼š

1. æ·»åŠ ä¸€ä¸ªå¿ƒæƒ…é€‰æ‹©å™¨ï¼Œè°ƒç”¨ `/api/greet` æ¥å£
2. ç»™ä¸ªæ€§åŒ–é—®å€™æ·»åŠ é”™è¯¯å¤„ç†ï¼ˆæ¯”å¦‚ç½‘ç»œæ–­å¼€çš„æƒ…å†µï¼‰
3. å°è¯•æ·»åŠ ä¸€ä¸ª"æ¸…ç©º"æŒ‰é’®ï¼Œæ¸…é™¤é—®å€™è¯­
4. ï¼ˆå¯é€‰ï¼‰è¯•è¯•ç”¨ AI è¾…åŠ©å®Œæˆä¸Šé¢çš„ç»ƒä¹ ï¼Œä½†è¦ç¡®ä¿ä½ ç†è§£æ¯ä¸€è¡Œä»£ç 

è¿™äº›ç»ƒä¹ èƒ½å¸®ä½ æ›´å¥½åœ°ç†è§£å“åº”å¼å’Œ API äº¤äº’ã€‚
:::

::: tip ä¸‹ä¸€ç« é¢„å‘Š
é¡µé¢ä¼šäº¤äº’äº†ï¼Œä½†è¿˜æ˜¯å¤ªç®€é™‹äº†ã€‚ä¸‹ä¸€ç« æˆ‘ä»¬è¦å¼€å‘ä¸€ä¸ªæ¼‚äº®çš„ä¸ªäººä¸»é¡µï¼Œå­¦ä¹ é¡µé¢å¸ƒå±€å’Œç»„ä»¶æ‹†åˆ†ï¼

å‡†å¤‡å¥½è®©ä½ çš„ç½‘ç«™å˜å¥½çœ‹äº†å—ï¼ŸğŸ¨
:::
