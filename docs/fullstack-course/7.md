---
title: 'ç¬¬ 7 ç« ï¼šæ–‡ç« è¯¦æƒ…ä¸æ•°æ®åº“'
createTime: 2025/12/19 12:00:00
permalink: /fullstack-course/article-detail-database/
---
# ç¬¬ 7 ç« ï¼šæ–‡ç« è¯¦æƒ…ä¸æ•°æ®åº“

::: important æœ¬ç« å­¦ä¹ ç›®æ ‡
- ç†è§£ä¸ºä»€ä¹ˆéœ€è¦æ•°æ®åº“
- å­¦ä¹  SQLite æ•°æ®åº“åŸºç¡€
- æŒæ¡ SQLAlchemy æ¨¡å‹å®šä¹‰
- å®ç°åŠ¨æ€è·¯ç”±å’Œæ–‡ç« è¯¦æƒ…é¡µ
- ğŸ‰ **æˆæœï¼šå®Œæ•´çš„åšå®¢ç³»ç»Ÿï¼Œæ•°æ®æŒä¹…åŒ–ï¼**
:::

æ–‡ç« åˆ—è¡¨æœ‰äº†ï¼Œä½†ç‚¹å‡»æ–‡ç« æ ‡é¢˜å´çœ‹ä¸åˆ°å†…å®¹ï¼Ÿè¿™ä¸€ç« æˆ‘ä»¬è¦å®ç°æ–‡ç« è¯¦æƒ…åŠŸèƒ½ï¼Œè€Œä¸”è¦æŠŠæ•°æ®å­˜åˆ°çœŸæ­£çš„æ•°æ®åº“é‡Œï¼

::: tip æœ¬ç« ç»“æŸåä½ ä¼šå¾—åˆ°ä»€ä¹ˆ
ä¸€ä¸ªçœŸæ­£çš„å…¨æ ˆåšå®¢ç³»ç»Ÿâ€”â€”æ–‡ç« æ•°æ®å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œé‡å¯æœåŠ¡ä¹Ÿä¸ä¼šä¸¢å¤±ï¼
:::

## 7.1 ä¸ºä»€ä¹ˆéœ€è¦æ•°æ®åº“

### 7.1.1 å½“å‰æ•°æ®å­˜å‚¨çš„é—®é¢˜

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬çš„æ–‡ç« æ•°æ®éƒ½æ˜¯å†™åœ¨ä»£ç é‡Œçš„ï¼š

```python
# backend/src/backend/__init__.py
articles = [
    {"id": 1, "title": "æˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢", ...},
    {"id": 2, "title": "Vue 3 å­¦ä¹ ç¬”è®°", ...},
    # ...
]
```

è¿™ç§å†…å­˜å­˜å‚¨æ–¹å¼çš„**ä¸¥é‡é—®é¢˜**ï¼š

- **æ•°æ®ä¸¢å¤±**ï¼šæœåŠ¡å™¨é‡å¯åï¼Œæ‰€æœ‰æ•°æ®éƒ½æ²¡äº†
- **æ— æ³•æŒä¹…åŒ–**ï¼šæ–°å‘å¸ƒçš„æ–‡ç« æ— æ³•ä¿å­˜
- **éš¾ä»¥ç®¡ç†**ï¼šæ•°æ®å¤šäº†ä¹‹åå¾ˆéš¾ç»´æŠ¤
- **æ€§èƒ½ç“¶é¢ˆ**ï¼šæ•°æ®é‡å¤§æ—¶å†…å­˜å ç”¨è¿‡é«˜

**è§£å†³æ–¹æ¡ˆï¼šæ•°æ®åº“ï¼**

### 7.1.2 æ•°æ®åº“çš„ä¼˜åŠ¿

ä½¿ç”¨æ•°æ®åº“åï¼Œæˆ‘ä»¬çš„æ•°æ®å°†ï¼š

- âœ… **æŒä¹…åŒ–å­˜å‚¨**ï¼šé‡å¯æœåŠ¡æ•°æ®ä¸ä¸¢å¤±
- âœ… **é«˜æ•ˆæŸ¥è¯¢**ï¼šæ”¯æŒå¤æ‚çš„æŸ¥è¯¢æ“ä½œ
- âœ… **æ•°æ®å®‰å…¨**ï¼šæ”¯æŒäº‹åŠ¡å’Œå¤‡ä»½
- âœ… **æ˜“äºæ‰©å±•**ï¼šæ”¯æŒæ•°æ®è¿ç§»å’Œä¼˜åŒ–

## 7.2 SQLite ç®€ä»‹

### 7.2.1 ä¸ºä»€ä¹ˆé€‰æ‹© SQLiteï¼Ÿ

SQLite æ˜¯è½»é‡çº§çš„æ–‡ä»¶å‹æ•°æ®åº“ï¼Œéå¸¸é€‚åˆå­¦ä¹ å’Œå°å‹é¡¹ç›®ï¼š

| ç‰¹ç‚¹ | è¯´æ˜ | ä¼˜åŠ¿ |
|------|------|------|
| ğŸš€ **é›¶é…ç½®** | æ— éœ€å®‰è£…æ•°æ®åº“æœåŠ¡å™¨ | å¼€ç®±å³ç”¨ |
| ğŸ“ **æ–‡ä»¶å­˜å‚¨** | æ•°æ®ä¿å­˜åœ¨å•ä¸ªæ–‡ä»¶ä¸­ | ä¾¿äºå¤‡ä»½å’Œè¿ç§» |
| ğŸ”§ **ç®€å•æ˜“ç”¨** | æ ‡å‡†çš„ SQL è¯­æ³• | å­¦ä¹ æˆæœ¬ä½ |
| ğŸ’ª **åŠŸèƒ½å®Œæ•´** | æ”¯æŒäº‹åŠ¡ã€ç´¢å¼•ç­‰ | æ»¡è¶³é¡¹ç›®éœ€æ±‚ |

å¯¹äºæˆ‘ä»¬çš„åšå®¢é¡¹ç›®ï¼ŒSQLite æ˜¯æœ€ä½³é€‰æ‹©ï¼

### 7.2.2 æ•°æ®åº“åŸºæœ¬æ¦‚å¿µ

åœ¨å¼€å§‹ä¹‹å‰ï¼Œå…ˆäº†è§£å‡ ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼š

| æ¦‚å¿µ | ç±»æ¯” | è¯´æ˜ |
|------|------|------|
| **æ•°æ®åº“** | æ–‡ä»¶æŸœ | å­˜å‚¨æ•°æ®çš„å®¹å™¨ |
| **è¡¨** | æ–‡ä»¶å¤¹ | å­˜å‚¨ç‰¹å®šç±»å‹çš„æ•°æ® |
| **å­—æ®µ** | æ–‡ä»¶å±æ€§ | æ•°æ®çš„å±æ€§ï¼ˆå¦‚æ ‡é¢˜ã€ä½œè€…ï¼‰ |
| **è®°å½•** | æ–‡ä»¶ | ä¸€æ¡å…·ä½“çš„æ•°æ® |

æˆ‘ä»¬çš„æ–‡ç« è¡¨ç»“æ„è®¾è®¡ï¼š

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| `id` | INTEGER | ä¸»é”®ï¼Œå”¯ä¸€æ ‡è¯† |
| `title` | TEXT | æ–‡ç« æ ‡é¢˜ |
| `summary` | TEXT | æ–‡ç« æ‘˜è¦ |
| `content` | TEXT | æ–‡ç« æ­£æ–‡ï¼ˆMarkdownï¼‰ |
| `author` | TEXT | ä½œè€… |
| `created_at` | TEXT | åˆ›å»ºæ—¶é—´ |
| `tags` | TEXT | æ ‡ç­¾ï¼ˆé€—å·åˆ†éš”ï¼‰ |

## 7.3 SQLAlchemy å…¥é—¨

### 7.3.1 ä»€ä¹ˆæ˜¯ SQLAlchemyï¼Ÿ

SQLAlchemy æ˜¯ Python ä¸­æœ€æµè¡Œçš„ ORMï¼ˆå¯¹è±¡å…³ç³»æ˜ å°„ï¼‰åº“ï¼š

- **ORM æ¦‚å¿µ**ï¼šå°†æ•°æ®åº“è¡¨æ˜ å°„ä¸º Python ç±»
- **ä¼˜åŠ¿**ï¼šä¸ç”¨å†™ SQLï¼Œç›´æ¥ç”¨ Python æ“ä½œæ•°æ®åº“
- **å…¼å®¹æ€§**ï¼šæ”¯æŒå¤šç§æ•°æ®åº“åç«¯ï¼ˆSQLiteã€MySQLã€PostgreSQLç­‰ï¼‰

::: info å…³äºå¼‚æ­¥çš„è¯´æ˜
ç¬¬ 7 ç« æˆ‘ä»¬ä½¿ç”¨ SQLAlchemy çš„åŒæ­¥æ–¹å¼ï¼Œå› ä¸ºï¼š
- å­¦ä¹ æ›²çº¿æ›´å¹³ç¼“
- å¯¹äºåšå®¢é¡¹ç›®æ€§èƒ½è¶³å¤Ÿ
- å¼‚æ­¥è¯¦ç»†å†…å®¹åœ¨ç¬¬ 13 ç« è®²è§£

å³ä½¿ä½¿ç”¨åŒæ­¥æ–¹å¼ï¼ŒFastAPI ä¹Ÿæ¯”ä¼ ç»Ÿæ¡†æ¶æ›´é«˜æ•ˆï¼
:::

### 7.3.2 å®‰è£… SQLAlchemy

é¦–å…ˆï¼Œåœ¨ `backend` é¡¹ç›®ä¸­å®‰è£… SQLAlchemyï¼š

```bash
# åœ¨ backend ç›®å½•ä¸‹æ‰§è¡Œ
pip install sqlalchemy
```

1## 7.4 å®šä¹‰ Article æ¨¡å‹

### 7.4.1 åˆ›å»ºæ•°æ®åº“é…ç½®æ–‡ä»¶

åœ¨ `backend/src/backend/` ç›®å½•ä¸‹åˆ›å»º `database.py`ï¼š

```python
# backend/src/backend/database.py
from sqlalchemy import create_engine
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy.orm import sessionmaker

# SQLite æ•°æ®åº“æ–‡ä»¶è·¯å¾„
SQLALCHEMY_DATABASE_URL = "sqlite:///./blog.db"

# åˆ›å»ºæ•°æ®åº“å¼•æ“
engine = create_engine(
    SQLALCHEMY_DATABASE_URL,
    connect_args={"check_same_thread": False}  # SQLite éœ€è¦è¿™ä¸ªå‚æ•°
)

# åˆ›å»º SessionLocal ç±»
SessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)

# åˆ›å»º Base ç±»
Base = declarative_base()

# æ•°æ®åº“ä¼šè¯ä¾èµ–
def get_db():
    db = SessionLocal()
    try:
        yield db
    finally:
        db.close()
```

### 7.4.2 å®šä¹‰ Article æ¨¡å‹

åœ¨ `backend/src/backend/` ç›®å½•ä¸‹åˆ›å»º `models.py`ï¼š

```python
# backend/src/backend/models.py
from sqlalchemy import Column, Integer, String, Text
from .database import Base

class Article(Base):
    __tablename__ = "articles"
    
    id = Column(Integer, primary_key=True, index=True)
    title = Column(String(200), nullable=False)
    summary = Column(Text)
    content = Column(Text)
    author = Column(String(100), default="åšä¸»")
    created_at = Column(String(20))
    tags = Column(String(200))
    
    def to_dict(self):
        """å°†æ¨¡å‹è½¬æ¢ä¸ºå­—å…¸æ ¼å¼"""
        return {
            "id": self.id,
            "title": self.title,
            "summary": self.summary,
            "content": self.content,
            "author": self.author,
            "created_at": self.created_at,
            "tags": self.tags.split(",") if self.tags else []
        }
```

## 7.5 æ•°æ®åº“åˆå§‹åŒ–

### 7.5.1 ä¿®æ”¹åç«¯ä¸»æ–‡ä»¶

ä¿®æ”¹ `backend/src/backend/__init__.py`ï¼Œæ·»åŠ æ•°æ®åº“åˆå§‹åŒ–ï¼š

```python
# backend/src/backend/__init__.py
from fastapi import FastAPI, Depends
from fastapi.middleware.cors import CORSMiddleware
from sqlalchemy.orm import Session
from . import models
from .database import engine, get_db
import random
from datetime import datetime

# åˆ›å»ºæ•°æ®åº“è¡¨
models.Base.metadata.create_all(bind=engine)

app = FastAPI()

# é…ç½®è·¨åŸŸï¼ˆä¿æŒä¸å˜ï¼‰
app.add_middleware(
    CORSMiddleware,
    allow_origins=["http://localhost:3000"],
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)

# é—®å€™è¯­åˆ—è¡¨ï¼ˆä¿æŒä¸å˜ï¼‰
greetings = [
    "ä½ å¥½ï¼Œè¿™æ˜¯æ¥è‡ªåç«¯çš„é—®å€™ï¼",
    "æ¬¢è¿æ¥åˆ°å…¨æ ˆå¼€å‘çš„ä¸–ç•Œï¼",
    "ä»Šå¤©ä¹Ÿè¦åŠ æ²¹å†™ä»£ç å“¦ï¼",
    "ä¼‘æ¯ä¸€ä¸‹ï¼Œå–æ¯æ°´å§ï½",
    "ä»£ç å†™ç´¯äº†ï¼Ÿå‡ºå»èµ°èµ°ï¼",
    "ä½ å·²ç»å¾ˆæ£’äº†ï¼Œç»§ç»­ä¿æŒï¼",
]

# åˆå§‹åŒ–ç¤ºä¾‹æ•°æ®ï¼ˆå¦‚æœæ•°æ®åº“ä¸ºç©ºï¼‰
@app.on_event("startup")
async def startup_event():
    db = SessionLocal()
    try:
        # æ£€æŸ¥æ˜¯å¦å·²æœ‰æ•°æ®
        if db.query(models.Article).count() == 0:
            # æ·»åŠ ç¤ºä¾‹æ–‡ç« 
            sample_articles = [
                models.Article(
                    title="æˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢",
                    summary="è¿™æ˜¯æˆ‘å­¦ä¹ å…¨æ ˆå¼€å‘çš„ç¬¬ä¸€ç¯‡åšå®¢ï¼Œè®°å½•äº†ä»é›¶å¼€å§‹æ­å»ºé¡¹ç›®çš„è¿‡ç¨‹ã€‚",
                    content="# æˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢\n\nè¿™æ˜¯æ–‡ç« çš„æ­£æ–‡å†…å®¹...",
                    author="åšä¸»",
                    created_at="2025-01-15",
                    tags="å…¥é—¨,å…¨æ ˆ"
                ),
                models.Article(
                    title="Vue 3 ç»„åˆå¼ API å­¦ä¹ ç¬”è®°",
                    summary="æ·±å…¥ç†è§£ Vue 3 çš„ Composition APIï¼ŒåŒ…æ‹¬ refã€reactiveã€computed ç­‰æ ¸å¿ƒæ¦‚å¿µã€‚",
                    content="# Vue 3 ç»„åˆå¼ API å­¦ä¹ ç¬”è®°\n\nè¿™æ˜¯ Vue 3 çš„å­¦ä¹ ç¬”è®°...",
                    author="åšä¸»",
                    created_at="2025-01-18",
                    tags="Vue,å‰ç«¯"
                ),
                # ... å…¶ä»–ç¤ºä¾‹æ–‡ç« 
            ]
            db.add_all(sample_articles)
            db.commit()
            print("âœ… ç¤ºä¾‹æ•°æ®åˆå§‹åŒ–å®Œæˆ")
    finally:
        db.close()

# åˆ›å»º SessionLocal å®ä¾‹ï¼ˆåœ¨æ–‡ä»¶é¡¶éƒ¨æ·»åŠ ï¼‰
def SessionLocal():
    db = next(get_db())
    return db

# å…¶ä»– API ä¿æŒä¸å˜...
```

### 7.5.2 åˆ›å»ºæ•°æ®åº“æ–‡ä»¶

è¿è¡Œåç«¯æœåŠ¡åï¼Œä¼šåœ¨ `backend` ç›®å½•ä¸‹ç”Ÿæˆ `blog.db` æ–‡ä»¶ï¼š

```bash
cd backend
uvicorn src.backend:app --reload
```

æ•°æ®åº“æ–‡ä»¶ `blog.db` åŒ…å«äº†æˆ‘ä»¬çš„æ–‡ç« è¡¨ç»“æ„ï¼

## 7.6 é‡æ„åç«¯ API

### 7.6.1 é‡æ„æ–‡ç« åˆ—è¡¨ API

ä¿®æ”¹ `backend/src/backend/__init__.py`ï¼Œä½¿ç”¨æ•°æ®åº“æŸ¥è¯¢æ›¿æ¢å†…å­˜å­˜å‚¨ï¼š

```python
# è·å–æ–‡ç« åˆ—è¡¨
@app.get("/api/articles")
async def get_articles(db: Session = Depends(get_db)):
    articles = db.query(models.Article).all()
    return {
        "articles": [article.to_dict() for article in articles],
        "total": len(articles)
    }

# è·å–å•ç¯‡æ–‡ç« 
@app.get("/api/articles/{article_id}")
async def get_article(article_id: int, db: Session = Depends(get_db)):
    article = db.query(models.Article).filter(models.Article.id == article_id).first()
    if article:
        return article.to_dict()
    return {"error": "æ–‡ç« ä¸å­˜åœ¨"}
```

### 7.6.2 æµ‹è¯•æ•°æ®åº“åŠŸèƒ½

1. **å¯åŠ¨åç«¯æœåŠ¡**ï¼š
   ```bash
   cd backend
   uvicorn src.backend:app --reload
   ```

2. **è®¿é—® API**ï¼š
   - `http://localhost:8000/api/articles` - åº”è¯¥çœ‹åˆ°æ–‡ç« åˆ—è¡¨
   - `http://localhost:8000/api/articles/1` - åº”è¯¥çœ‹åˆ°ç¬¬ä¸€ç¯‡æ–‡ç« 
   - `http://localhost:8000/docs` - å¯ä»¥åœ¨äº¤äº’å¼æ–‡æ¡£ä¸­æµ‹è¯•

3. **æ£€æŸ¥æ•°æ®åº“æ–‡ä»¶**ï¼š
   åœ¨ `backend` ç›®å½•ä¸‹åº”è¯¥å‡ºç°äº† `blog.db` æ–‡ä»¶ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬çš„æ•°æ®åº“ï¼

## 7.7 Nuxt åŠ¨æ€è·¯ç”±

### 7.7.1 åŠ¨æ€è·¯ç”±æ¦‚å¿µ

åœ¨ Nuxt ä¸­ï¼ŒåŠ¨æ€è·¯ç”±ä½¿ç”¨æ–¹æ‹¬å· `[]` è¡¨ç¤ºï¼š

```
pages/
â”œâ”€â”€ blog/
â”‚   â”œâ”€â”€ index.vue      â†’ /blog          â† ç¬¬6ç« åšçš„
â”‚   â””â”€â”€ [id].vue       â†’ /blog/123      â† æœ¬ç« è¦åšçš„ï¼
```

**è·¯ç”±åŒ¹é…è§„åˆ™**ï¼š
- `/blog` â†’ `index.vue`ï¼ˆæ–‡ç« åˆ—è¡¨ï¼‰
- `/blog/1` â†’ `[id].vue`ï¼ˆæ–‡ç« è¯¦æƒ…ï¼Œid=1ï¼‰
- `/blog/hello` â†’ `[id].vue`ï¼ˆæ–‡ç« è¯¦æƒ…ï¼Œid="hello"ï¼‰

### 7.7.2 åŠ¨æ€è·¯ç”±å‚æ•°è·å–

åœ¨åŠ¨æ€è·¯ç”±é¡µé¢ä¸­ï¼Œå¯ä»¥é€šè¿‡ `useRoute()` è·å–å‚æ•°ï¼š

```javascript
const route = useRoute()
const articleId = route.params.id  // è·å– URL ä¸­çš„ id å‚æ•°
```

## 7.8 æ–‡ç« è¯¦æƒ…é¡µé¢

### 7.8.1 åˆ›å»ºæ–‡ç« è¯¦æƒ…é¡µé¢

åœ¨ `frontend/app/pages/blog/` ç›®å½•ä¸‹åˆ›å»º `[id].vue`ï¼š

```vue
<!-- frontend/app/pages/blog/[id].vue -->
<template>
  <div>
    <!-- åŠ è½½çŠ¶æ€ -->
    <div v-if="pending" class="text-center py-12">
      <p class="text-gray-500">â³ åŠ è½½ä¸­...</p>
    </div>

    <!-- é”™è¯¯çŠ¶æ€ -->
    <div v-else-if="error" class="text-center py-12">
      <p class="text-red-500">âŒ æ–‡ç« åŠ è½½å¤±è´¥ï¼š{{ error.message }}</p>
      <button
        @click="refresh"
        class="mt-4 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700"
      >
        é‡è¯•
      </button>
    </div>

    <!-- æ–‡ç« è¯¦æƒ… -->
    <div v-else-if="article" class="max-w-4xl mx-auto">
      <!-- è¿”å›æŒ‰é’® -->
      <div class="mb-6">
        <NuxtLink
          to="/blog"
          class="inline-flex items-center text-indigo-600 hover:text-indigo-800"
        >
          â† è¿”å›æ–‡ç« åˆ—è¡¨
        </NuxtLink>
      </div>

      <!-- æ–‡ç« æ ‡é¢˜ -->
      <h1 class="text-4xl font-bold text-gray-800 mb-4">
        {{ article.title }}
      </h1>

      <!-- æ–‡ç« å…ƒä¿¡æ¯ -->
      <div class="flex items-center gap-6 text-gray-600 mb-8">
        <span class="flex items-center gap-2">
          ğŸ‘¤ {{ article.author }}
        </span>
        <span class="flex items-center gap-2">
          ğŸ“… {{ article.created_at }}
        </span>
        <div class="flex gap-2">
          <span
            v-for="tag in article.tags"
            :key="tag"
            class="px-2 py-1 bg-gray-100 text-gray-600 rounded text-sm"
          >
            {{ tag }}
          </span>
        </div>
      </div>

      <!-- æ–‡ç« å†…å®¹ -->
      <div class="prose prose-lg max-w-none">
        <div v-html="renderedContent"></div>
      </div>
    </div>

    <!-- æ–‡ç« ä¸å­˜åœ¨ -->
    <div v-else class="text-center py-12">
      <p class="text-gray-500">ğŸ“­ æ–‡ç« ä¸å­˜åœ¨</p>
      <NuxtLink
        to="/blog"
        class="mt-4 inline-block px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700"
      >
        è¿”å›æ–‡ç« åˆ—è¡¨
      </NuxtLink>
    </div>
  </div>
</template>

<script setup>
// è·å–è·¯ç”±å‚æ•°
const route = useRoute()
const articleId = route.params.id

// è·å–æ–‡ç« è¯¦æƒ…
const { data: article, pending, error, refresh } = await useFetch(
  `http://localhost:8000/api/articles/${articleId}`
)

// ä½¿ç”¨ MarkdownIt æ¸²æŸ“ Markdown
import MarkdownIt from 'markdown-it'
const md = new MarkdownIt()

const renderedContent = computed(() => {
  return article.value?.content ? md.render(article.value.content) : ''
})
</script>

<style scoped>
.prose {
  color: #374151;
  line-height: 1.75;
}

.prose h1 {
  font-size: 2.25em;
  font-weight: 800;
  margin-top: 0;
  margin-bottom: 0.5em;
}

.prose h2 {
  font-size: 1.875em;
  font-weight: 700;
  margin-top: 2em;
  margin-bottom: 1em;
}

.prose p {
  margin-top: 1.25em;
  margin-bottom: 1.25em;
}

.prose code {
  background-color: #f3f4f6;
  padding: 0.125em 0.25em;
  border-radius: 0.25em;
  font-size: 0.875em;
}

.prose pre {
  background-color: #1f2937;
  color: #f9fafb;
  padding: 1em;
  border-radius: 0.5em;
  overflow-x: auto;
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
</style>
```

### 7.8.2 é¡µé¢åŠŸèƒ½è¯´æ˜

- **åŠ è½½çŠ¶æ€**ï¼šæ˜¾ç¤ºåŠ è½½æç¤º
- **é”™è¯¯å¤„ç†**ï¼šæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯å¹¶æä¾›é‡è¯•æŒ‰é’®
- **æ–‡ç« è¯¦æƒ…**ï¼šæ˜¾ç¤ºæ ‡é¢˜ã€ä½œè€…ã€æ—¶é—´ã€æ ‡ç­¾ç­‰ä¿¡æ¯
- **è¿”å›å¯¼èˆª**ï¼šæä¾›è¿”å›æ–‡ç« åˆ—è¡¨çš„é“¾æ¥
- **å“åº”å¼è®¾è®¡**ï¼šä½¿ç”¨ Tailwind CSS å®ç°ç¾è§‚çš„å¸ƒå±€

## 7.9 Markdown æ¸²æŸ“

### 7.9.1 å®‰è£… Markdown æ¸²æŸ“åº“

åœ¨ `frontend` é¡¹ç›®ä¸­å®‰è£… `markdown-it`ï¼š

```bash
# åœ¨ frontend ç›®å½•ä¸‹æ‰§è¡Œ
npm install markdown-it
```

### 7.9.2 Markdown æ¸²æŸ“å®ç°

åœ¨æ–‡ç« è¯¦æƒ…é¡µé¢ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ `markdown-it` å°† Markdown å†…å®¹è½¬æ¢ä¸º HTMLï¼š

```javascript
import MarkdownIt from 'markdown-it'
const md = new MarkdownIt()

const renderedContent = computed(() => {
  return article.value?.content ? md.render(article.value.content) : ''
})
```

### 7.9.3 æ ·å¼ç¾åŒ–

ä½¿ç”¨ Tailwind CSS çš„ `prose` ç±»æ¥ç¾åŒ– Markdown æ¸²æŸ“æ•ˆæœï¼š

```html
<div class="prose prose-lg max-w-none">
  <div v-html="renderedContent"></div>
</div>
```

`prose` ç±»æä¾›äº†ï¼š
- åˆç†çš„å­—ä½“å¤§å°å’Œè¡Œé«˜
- ä»£ç å—æ ·å¼
- åˆ—è¡¨å’Œå¼•ç”¨æ ·å¼
- å›¾ç‰‡å’Œè¡¨æ ¼æ ·å¼

## 7.4 é‡æ„åç«¯ API

### 7.4.1 é‡æ„æ–‡ç« åˆ—è¡¨ API

ä¿®æ”¹ `backend/src/backend/__init__.py`ï¼Œä½¿ç”¨æ•°æ®åº“æŸ¥è¯¢ï¼š

```python
# è·å–æ–‡ç« åˆ—è¡¨
@app.get("/api/articles")
async def get_articles(db: Session = Depends(get_db)):
    articles = db.query(models.Article).all()
    return {
        "articles": [article.to_dict() for article in articles],
        "total": len(articles)
    }

# è·å–å•ç¯‡æ–‡ç« 
@app.get("/api/articles/{article_id}")
async def get_article(article_id: int, db: Session = Depends(get_db)):
    article = db.query(models.Article).filter(models.Article.id == article_id).first()
    if article:
        return article.to_dict()
    return {"error": "æ–‡ç« ä¸å­˜åœ¨"}
```

### 7.4.2 æµ‹è¯•æ•°æ®åº“åŠŸèƒ½

1. **å¯åŠ¨åç«¯æœåŠ¡**ï¼š
   ```bash
   cd backend
   uvicorn src.backend:app --reload
   ```

2. **è®¿é—® API**ï¼š
   - `http://localhost:8000/api/articles` - åº”è¯¥çœ‹åˆ°æ–‡ç« åˆ—è¡¨
   - `http://localhost:8000/api/articles/1` - åº”è¯¥çœ‹åˆ°ç¬¬ä¸€ç¯‡æ–‡ç« 
   - `http://localhost:8000/docs` - å¯ä»¥åœ¨äº¤äº’å¼æ–‡æ¡£ä¸­æµ‹è¯•

3. **æ£€æŸ¥æ•°æ®åº“æ–‡ä»¶**ï¼š
   åœ¨ `backend` ç›®å½•ä¸‹åº”è¯¥å‡ºç°äº† `blog.db` æ–‡ä»¶ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬çš„æ•°æ®åº“ï¼

## 7.5 æµ‹è¯•æ–‡ç« è¯¦æƒ…åŠŸèƒ½

### 7.5.1 å¯åŠ¨å‰ç«¯æœåŠ¡

```bash
cd frontend
npm run dev
```

### 7.5.2 æµ‹è¯•æµç¨‹

1. è®¿é—® `http://localhost:3000/blog`
2. ç‚¹å‡»ä»»æ„æ–‡ç« çš„æ ‡é¢˜
3. åº”è¯¥è·³è½¬åˆ°æ–‡ç« è¯¦æƒ…é¡µï¼ˆå¦‚ `http://localhost:3000/blog/1`ï¼‰
4. å¯ä»¥çœ‹åˆ°å®Œæ•´çš„æ–‡ç« å†…å®¹ï¼ˆåŒ…æ‹¬ Markdown æ¸²æŸ“ï¼‰
5. ç‚¹å‡»"è¿”å›æ–‡ç« åˆ—è¡¨"å¯ä»¥å›åˆ°åˆ—è¡¨é¡µ

::: important ğŸ‰ æ­å–œï¼æ•°æ®åº“é›†æˆå®Œæˆï¼
ç°åœ¨ä½ çš„åšå®¢ï¼š
- âœ… æ•°æ®å­˜å‚¨åœ¨ SQLite æ•°æ®åº“ä¸­
- âœ… é‡å¯æœåŠ¡æ•°æ®ä¸ä¼šä¸¢å¤±
- âœ… å¯ä»¥æŸ¥çœ‹æ–‡ç« è¯¦æƒ…
- âœ… Markdown å†…å®¹æ­£ç¡®æ¸²æŸ“

è¿™å°±æ˜¯çœŸæ­£çš„å…¨æ ˆåº”ç”¨ï¼
:::

## 7.6 å°ç»“

::: note æœ¬ç« å›é¡¾
- âœ… å­¦ä¹ äº† SQLite æ•°æ®åº“åŸºç¡€
- âœ… ä½¿ç”¨ SQLAlchemy å®šä¹‰ Article æ¨¡å‹
- âœ… å®ç°äº†æ•°æ®åº“åˆå§‹åŒ–å’Œç¤ºä¾‹æ•°æ®
- âœ… åˆ›å»ºäº† Nuxt åŠ¨æ€è·¯ç”± `/blog/[id]`
- âœ… å®ç°äº†æ–‡ç« è¯¦æƒ…é¡µé¢å’Œ Markdown æ¸²æŸ“
- âœ… é‡æ„äº†åç«¯ API ä½¿ç”¨æ•°æ®åº“æŸ¥è¯¢
:::

::: important åŠ¨æ‰‹ç»ƒä¹ 
è¯•ç€æ‰©å±•ä¸€ä¸‹ï¼š

1. **æ·»åŠ æ–‡ç« ç¼–è¾‘æ—¶é—´**ï¼šåœ¨æ¨¡å‹ä¸­æ·»åŠ  `updated_at` å­—æ®µ
2. **å®ç°æ–‡ç« æœç´¢**ï¼šåœ¨åç«¯æ·»åŠ æœç´¢ APIï¼Œæ”¯æŒæŒ‰æ ‡é¢˜æœç´¢
3. **æ·»åŠ æ–‡ç« åˆ†ç±»**ï¼šåˆ›å»ºåˆ†ç±»è¡¨ï¼Œå®ç°æ–‡ç« ä¸åˆ†ç±»çš„å…³è”
4. **ä¼˜åŒ– Markdown æ¸²æŸ“**ï¼šæ·»åŠ ä»£ç é«˜äº®ã€æ•°å­¦å…¬å¼ç­‰é«˜çº§åŠŸèƒ½

è¿™äº›ç»ƒä¹ èƒ½å¸®ä½ æ›´å¥½åœ°ç†è§£æ•°æ®åº“è®¾è®¡å’Œ API å¼€å‘ã€‚
:::

::: tip ä¸‹ä¸€ç« é¢„å‘Š
ç°åœ¨å¯ä»¥çœ‹æ–‡ç« äº†ï¼Œä½†è¿˜ä¸èƒ½å†™æ–‡ç« ï¼Ÿä¸‹ä¸€ç« æˆ‘ä»¬è¦å®ç°å‘å¸ƒåŠŸèƒ½ï¼

- é›†æˆ Markdown ç¼–è¾‘å™¨
- å­¦ä¹ è¡¨å•éªŒè¯ï¼ˆPydanticï¼‰
- å®ç° POST è¯·æ±‚å‘å¸ƒæ–‡ç« 

å‡†å¤‡å¥½è®©ä½ çš„åšå®¢æ”¯æŒå‘å¸ƒæ–°æ–‡ç« äº†å—ï¼Ÿâœï¸
:::